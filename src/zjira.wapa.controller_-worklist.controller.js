sap.ui.define([                                                                                                                                                                                                                                                
	"fiori/controller/BaseController",                                                                                                                                                                                                                            
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"fiori/model/formatter",                                                                                                                                                                                                                                      
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/model/FilterOperator",                                                                                                                                                                                                                                
	'sap/ui/model/BindingMode',                                                                                                                                                                                                                                   
	'sap/viz/ui5/data/FlattenedDataset',                                                                                                                                                                                                                          
	'sap/viz/ui5/format/ChartFormatter',                                                                                                                                                                                                                          
	'sap/viz/ui5/api/env/Format',                                                                                                                                                                                                                                 
	"sap/ui/core/routing/History"                                                                                                                                                                                                                                 
], function(BaseController, JSONModel, formatter, Filter, FilterOperator, BindingMode, FlattenedDataset, ChartFormatter, Format, History) {                                                                                                                    
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return BaseController.extend("fiori.controller.Worklist", {                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		formatter: formatter,                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* lifecycle methods                                           */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Called when the worklist controller is instantiated.                                                                                                                                                                                                      
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onInit: function() {                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			//start = d;                                                                                                                                                                                                                                                
			// 	//      1.Get the id of the VizFrame		                                                                                                                                                                                                                  
			// var oVizFrame = this.getView().byId("idpiechart");                                                                                                                                                                                                       
			// //var VizFrame1 = this.getView().byId("areachart");                                                                                                                                                                                                      
			// //      2. Create Viz dataset to feed to the data to the graph                                                                                                                                                                                           
			// var oDataset = new sap.viz.ui5.data.FlattenedDataset({                                                                                                                                                                                                   
			// 	dimensions: [{                                                                                                                                                                                                                                          
			// 		name: 'User ID',                                                                                                                                                                                                                                       
			// 		value: "{As4user}"                                                                                                                                                                                                                                     
			// 	}],                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			// 	measures: [{                                                                                                                                                                                                                                            
			// 		name: 'EP1 TRs',                                                                                                                                                                                                                                       
			// 		value: '{Ep1TotCnt}'                                                                                                                                                                                                                                   
			// 	}],                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			// 	data: {                                                                                                                                                                                                                                                 
			// 		path: "/TRSet"                                                                                                                                                                                                                                         
			// 	}                                                                                                                                                                                                                                                       
			// });                                                                                                                                                                                                                                                      
			// oVizFrame.setDataset(oDataset);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// //      3.Set Viz properties                                                                                                                                                                                                                             
			// oVizFrame.setVizProperties({                                                                                                                                                                                                                             
			// 	title: {                                                                                                                                                                                                                                                
			// 		text: "Defalut One Month EP1 Report"                                                                                                                                                                                                                   
			// 	},                                                                                                                                                                                                                                                      
			// 	plotArea: {                                                                                                                                                                                                                                             
			// 		colorPalette: d3.scale.category20().range(),                                                                                                                                                                                                           
			// 		drawingEffect: "glossy"                                                                                                                                                                                                                                
			// 	}                                                                                                                                                                                                                                                       
			// });                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			// var feedSize = new sap.viz.ui5.controls.common.feeds.FeedItem({                                                                                                                                                                                          
			// 		'uid': "size",                                                                                                                                                                                                                                         
			// 		'type': "Measure",                                                                                                                                                                                                                                     
			// 		'values': ["EP1 TRs"]                                                                                                                                                                                                                                  
			// 	}),                                                                                                                                                                                                                                                     
			// 	feedColor = new sap.viz.ui5.controls.common.feeds.FeedItem({                                                                                                                                                                                            
			// 		'uid': "color",                                                                                                                                                                                                                                        
			// 		'type': "Dimension",                                                                                                                                                                                                                                   
			// 		'values': ["User ID"]                                                                                                                                                                                                                                  
			// 	});                                                                                                                                                                                                                                                     
			// oVizFrame.addFeed(feedSize);                                                                                                                                                                                                                             
			// oVizFrame.addFeed(feedColor);                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
			// var oPopOver = this.getView().byId("idPopOver");                                                                                                                                                                                                         
			// oPopOver.setActionItems([{                                                                                                                                                                                                                               
			// 	type: "action",                                                                                                                                                                                                                                         
			// 	text: "Show Selected Records",                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// 	press: function() {                                                                                                                                                                                                                                     
			// 		debugger;                                                                                                                                                                                                                                              
			// 		var b;                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			// 		this.getView().byId("Tabledata").bindAggregation("items", {                                                                                                                                                                                            
			// 			filters: [new Filter("Ordtyp", FilterOperator.EQ, sap.ui.getCore().oTblKey)],                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			// 			template: oTemplate,                                                                                                                                                                                                                                  
			// 			templateShareable: true,                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			// 			path: "Chartdata>/results",                                                                                                                                                                                                                           
			// 			events: {                                                                                                                                                                                                                                             
			// 				refresh: function(dd) {                                                                                                                                                                                                                              
			// 					var a;                                                                                                                                                                                                                                              
			// 				}                                                                                                                                                                                                                                                    
			// 			}                                                                                                                                                                                                                                                     
			// 		});                                                                                                                                                                                                                                                    
			// 		this.getView().byId("chartContainerdcc").switchChart(this.getView().byId("chartContainerdcc").getContent()[1]);                                                                                                                                        
			// 	}.bind(this)                                                                                                                                                                                                                                            
			// }]);                                                                                                                                                                                                                                                     
			// oPopOver.connect(oVizFrame.getVizUid());&nbsp;                                                                                                                                                                                                           
&nbsp;                                                                                                                                                                                                                                                         
			///////////////////////////////////////////////////////////////////////////////////                                                                                                                                                                         
			//Default date&nbsp;                                                                                                                                                                                                                                        
			var d = new Date();                                                                                                                                                                                                                                         
			d = d.setDate(-90);                                                                                                                                                                                                                                         
			this.byId("SD1").setDateValue(new Date(d));                                                                                                                                                                                                                 
			this.byId("ED1").setDateValue(new Date());                                                                                                                                                                                                                  
			this.GETLISTEH();                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.byId("IDatefrom").setDateValue(new Date(d));                                                                                                                                                                                                           
			this.byId("IDateto").setDateValue(new Date());                                                                                                                                                                                                              
			this.ChartrefreshEH();                                                                                                                                                                                                                                      
			                                                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
			/////////////////////////////////////////////////////////////////////////////////                                                                                                                                                                           
			var jsonmodelobj = new sap.ui.model.json.JSONModel({data : [ ] });                                                                                                                                                                                          
			                                                                                                                                                                                                                                                            
			this.getView().setModel(jsonmodelobj);                                                                                                                                                                                                                      
			                                                                                                                                                                                                                                                            
			var itemrow1 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                          
            var itemrow2 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                 
            var itemrow3 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                 
            var itemrow4 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                 
            var itemrow5 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                 
            var itemrow6 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : "" };                                                                                                                                                                  
            var itemrow7 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : "" };                                                                                                                                                                  
            var itemrow8 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                 
            var itemrow9 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                 
            var itemrow10 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                
            var itemrow11 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                
            var itemrow12 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : "" };                                                                                                                                                                 
            var itemrow13 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                
            var itemrow14 = { Sprint : "" , Chgreq : "" , Epic : "" , Des : "" , Teams : ""  };                                                                                                                                                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
            var itemdata = jsonmodelobj.getProperty("/data");                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
            itemdata.push(itemrow1);                                                                                                                                                                                                                           
            itemdata.push(itemrow2);                                                                                                                                                                                                                           
            itemdata.push(itemrow3);                                                                                                                                                                                                                           
            itemdata.push(itemrow4);                                                                                                                                                                                                                           
            itemdata.push(itemrow5);                                                                                                                                                                                                                           
            itemdata.push(itemrow6);                                                                                                                                                                                                                           
            itemdata.push(itemrow7);                                                                                                                                                                                                                           
            itemdata.push(itemrow8);                                                                                                                                                                                                                           
            itemdata.push(itemrow9);                                                                                                                                                                                                                           
            itemdata.push(itemrow10);                                                                                                                                                                                                                          
            itemdata.push(itemrow11);                                                                                                                                                                                                                          
            itemdata.push(itemrow12);                                                                                                                                                                                                                          
            itemdata.push(itemrow13);                                                                                                                                                                                                                          
            itemdata.push(itemrow14);                                                                                                                                                                                                                          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
          jsonmodelobj.setData({data: itemdata});                                                                                                                                                                                                              
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
			////////////////////////////////////////////////////////////////////////                                                                                                                                                                                    
			var oViewModel,                                                                                                                                                                                                                                             
				iOriginalBusyDelay,                                                                                                                                                                                                                                        
				oTable = this.byId("table");                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Put down worklist table's original value for busy indicator delay,                                                                                                                                                                                       
			// so it can be restored later on. Busy handling on the table is                                                                                                                                                                                            
			// taken care of by the table itself.                                                                                                                                                                                                                       
			iOriginalBusyDelay = oTable.getBusyIndicatorDelay();                                                                                                                                                                                                        
			this._oTable = oTable;                                                                                                                                                                                                                                      
			// keeps the search state                                                                                                                                                                                                                                   
			this._oTableSearchState = [];                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Model used to manipulate control states                                                                                                                                                                                                                  
			oViewModel = new JSONModel({                                                                                                                                                                                                                                
				worklistTableTitle: this.getResourceBundle().getText("worklistTableTitle"),                                                                                                                                                                                
				saveAsTileTitle: this.getResourceBundle().getText("worklistViewTitle"),                                                                                                                                                                                    
				shareOnJamTitle: this.getResourceBundle().getText("worklistViewTitle"),                                                                                                                                                                                    
				shareSendEmailSubject: this.getResourceBundle().getText("shareSendEmailWorklistSubject"),                                                                                                                                                                  
				shareSendEmailMessage: this.getResourceBundle().getText("shareSendEmailWorklistMessage", [location.href]),                                                                                                                                                 
				tableNoDataText: this.getResourceBundle().getText("tableNoDataText"),                                                                                                                                                                                      
				tableBusyDelay: 0                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			this.setModel(oViewModel, "worklistView");                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			// Make sure, busy indication is showing immediately so there is no                                                                                                                                                                                         
			// break after the busy indication for loading the view's meta data is                                                                                                                                                                                      
			// ended (see promise 'oWhenMetadataIsLoaded' in AppController)                                                                                                                                                                                             
			oTable.attachEventOnce("updateFinished", function() {                                                                                                                                                                                                       
				// Restore original busy indicator delay for worklist's table                                                                                                                                                                                              
				oViewModel.setProperty("/tableBusyDelay", iOriginalBusyDelay);                                                                                                                                                                                             
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* event handlers                                              */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Triggered by the table's 'updateFinished' event: after new table                                                                                                                                                                                          
		 * data is available, this handler method updates the table counter.                                                                                                                                                                                         
		 * This should only happen if the update was successful, which is                                                                                                                                                                                            
		 * why this handler is attached to 'updateFinished' and not to the                                                                                                                                                                                           
		 * table's list binding's 'dataReceived' method.                                                                                                                                                                                                             
		 * @param {sap.ui.base.Event} oEvent the update finished event                                                                                                                                                                                               
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onUpdateFinished: function(oEvent) {                                                                                                                                                                                                                         
			// update the worklist's object counter after the table update                                                                                                                                                                                              
			var sTitle,                                                                                                                                                                                                                                                 
				oTable = oEvent.getSource(),                                                                                                                                                                                                                               
				iTotalItems = oEvent.getParameter("total");                                                                                                                                                                                                                
			// only update the counter if the length is final and                                                                                                                                                                                                       
			// the table is not empty                                                                                                                                                                                                                                   
			if (iTotalItems && oTable.getBinding("items").isLengthFinal()) {                                                                                                                                                                                            
				sTitle = this.getResourceBundle().getText("worklistTableTitleCount", [iTotalItems]);                                                                                                                                                                       
			} else {                                                                                                                                                                                                                                                    
				sTitle = this.getResourceBundle().getText("worklistTableTitle");                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
			this.getModel("worklistView").setProperty("/worklistTableTitle", sTitle);                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler when a table item gets pressed                                                                                                                                                                                                              
		 * @param {sap.ui.base.Event} oEvent the table selectionChange event                                                                                                                                                                                         
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onPress: function(oEvent) {                                                                                                                                                                                                                                  
			// The source is the list item that got pressed                                                                                                                                                                                                             
			this._showObject(oEvent.getSource());                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler for navigating back.                                                                                                                                                                                                                        
		 * It there is a history entry or an previous app-to-app navigation we go one step back in the browser history                                                                                                                                               
		 * If not, it will navigate to the shell home                                                                                                                                                                                                                
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onNavBack: function() {                                                                                                                                                                                                                                      
			var sPreviousHash = History.getInstance().getPreviousHash(),                                                                                                                                                                                                
				oCrossAppNavigator = sap.ushell.Container.getService("CrossApplicationNavigation");                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			if (sPreviousHash !== undefined || !oCrossAppNavigator.isInitialNavigation()) {                                                                                                                                                                             
				history.go(-1);                                                                                                                                                                                                                                            
			} else {                                                                                                                                                                                                                                                    
				oCrossAppNavigator.toExternal({                                                                                                                                                                                                                            
					target: {                                                                                                                                                                                                                                                 
						shellHash: "#Shell-home"                                                                                                                                                                                                                                 
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler when the share in JAM button has been clicked                                                                                                                                                                                               
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onShareInJamPress: function() {                                                                                                                                                                                                                              
			var oViewModel = this.getModel("worklistView"),                                                                                                                                                                                                             
				oShareDialog = sap.ui.getCore().createComponent({                                                                                                                                                                                                          
					name: "sap.collaboration.components.fiori.sharing.dialog",                                                                                                                                                                                                
					settings: {                                                                                                                                                                                                                                               
						object: {                                                                                                                                                                                                                                                
							id: location.href,                                                                                                                                                                                                                                      
							share: oViewModel.getProperty("/shareOnJamTitle")                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			oShareDialog.open();                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onSearch: function(oEvent) {                                                                                                                                                                                                                                 
			if (oEvent.getParameters().refreshButtonPressed) {                                                                                                                                                                                                          
				// Search field's 'refresh' button has been pressed.                                                                                                                                                                                                       
				// This is visible if you select any master list item.                                                                                                                                                                                                     
				// In this case no new search is triggered, we only                                                                                                                                                                                                        
				// refresh the list binding.                                                                                                                                                                                                                               
				this.onRefresh();                                                                                                                                                                                                                                          
			} else {                                                                                                                                                                                                                                                    
				var oTableSearchState = [];                                                                                                                                                                                                                                
				var sQuery = oEvent.getParameter("query");                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				if (sQuery && sQuery.length > 0) {                                                                                                                                                                                                                         
					oTableSearchState = [new Filter("Ep1TotCnt", FilterOperator.Contains, sQuery)];                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
				this._applySearch(oTableSearchState);                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler for refresh event. Keeps filter, sort                                                                                                                                                                                                       
		 * and group settings and refreshes the list binding.                                                                                                                                                                                                        
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onRefresh: function() {                                                                                                                                                                                                                                      
			this._oTable.getBinding("items").refresh();                                                                                                                                                                                                                 
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* internal methods                                            */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Shows the selected item on the object page                                                                                                                                                                                                                
		 * On phones a additional history entry is created                                                                                                                                                                                                           
		 * @param {sap.m.ObjectListItem} oItem selected Item                                                                                                                                                                                                         
		 * @private                                                                                                                                                                                                                                                  
		 */                                                                                                                                                                                                                                                          
		_showObject: function(oItem) {                                                                                                                                                                                                                               
			this.getRouter().navTo("object", {                                                                                                                                                                                                                          
				objectId: oItem.getBindingContext().getProperty("As4user")                                                                                                                                                                                                 
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Internal helper method to apply both filter and search state together on the list binding                                                                                                                                                                 
		 * @param {object} oTableSearchState an array of filters for the search                                                                                                                                                                                      
		 * @private                                                                                                                                                                                                                                                  
		 */                                                                                                                                                                                                                                                          
		_applySearch: function(oTableSearchState) {                                                                                                                                                                                                                  
			var oViewModel = this.getModel("worklistView");                                                                                                                                                                                                             
			this._oTable.getBinding("items").filter(oTableSearchState, "Application");                                                                                                                                                                                  
			// changes the noDataText of the list in case there are no filter results                                                                                                                                                                                   
			if (oTableSearchState.length !== 0) {                                                                                                                                                                                                                       
				oViewModel.setProperty("/tableNoDataText", this.getResourceBundle().getText("worklistNoDataWithSearchText"));                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		// selectchanged: function() {                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		// 	var selectedchart = this.getView().byId("chartTypeSelect").getSelectedItem().getKey();                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		// 	var oVizFrame = this.getView().byId("idVizFrame");                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		// 	switch (selectedchart) {                                                                                                                                                                                                                                 
		// 		case "column":                                                                                                                                                                                                                                          
		// 			oVizFrame.setVizType("column");                                                                                                                                                                                                                        
		// 			break;                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		// 		case "line":                                                                                                                                                                                                                                            
		// 			oVizFrame.setVizType("line");                                                                                                                                                                                                                          
		// 			break;                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		// 		case "bar":                                                                                                                                                                                                                                             
		// 			oVizFrame.setVizType("bar");                                                                                                                                                                                                                           
		// 			break;                                                                                                                                                                                                                                                 
		// 		case "waterfall":                                                                                                                                                                                                                                       
		// 			oVizFrame.setVizType("waterfall");                                                                                                                                                                                                                     
		// 			break;                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		// 	}                                                                                                                                                                                                                                                        
		// },                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		nextlevelEH: function(oEvent) {                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			var cItem = [];                                                                                                                                                                                                                                             
			sap.ui.getCore().cItem = [];                                                                                                                                                                                                                                
			sap.ui.getCore().cReq = [];                                                                                                                                                                                                                                 
			var cReq = [];                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			var tableo = this.getView().byId("sprinttable");                                                                                                                                                                                                            
			var items = tableo.getSelectedContextPaths();                                                                                                                                                                                                               
			var modelo = this.getView().getModel("Sprint1");                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			for (var i = 0; i < items.length; i++) {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				//	var value = modelo.getProperty("Sprint", items[i]);                                                                                                                                                                                                     
				var value = modelo.getProperty(items[i]).Sprint;                                                                                                                                                                                                           
				cItem.push(value);                                                                                                                                                                                                                                         
				//	var value1 = modelo.getProperty("Chgreq", items[i]);                                                                                                                                                                                                    
				var value1 = modelo.getProperty(items[i]).Chgreq;                                                                                                                                                                                                          
				cReq.push(value1);                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			sap.ui.getCore().cItem = cItem;                                                                                                                                                                                                                             
			sap.ui.getCore().cReq = cReq;                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			this.getOwnerComponent().getRouter().navTo("epicscreen", {}, false);                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		totalrecordsEH: function(oEvent) {                                                                                                                                                                                                                           
			var recordcount = oEvent.getParameter("total");                                                                                                                                                                                                             
			var tableref = this.getView().byId("sprinttable");                                                                                                                                                                                                          
			tableref.setHeaderText("Total EPICs Records:" + recordcount);                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		customEH: function() {                                                                                                                                                                                                                                       
			this.getView().byId("labelfrom").setVisible(true);                                                                                                                                                                                                          
			this.getView().byId("labelto").setVisible(true);                                                                                                                                                                                                            
			this.getView().byId("customdate2").setVisible(true);                                                                                                                                                                                                        
			this.getView().byId("customdate1").setVisible(true);                                                                                                                                                                                                        
			this.getView().byId("apply").setVisible(true);                                                                                                                                                                                                              
			this.getView().byId("cancel").setVisible(true);                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		buttonEH: function()                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		{                                                                                                                                                                                                                                                            
			this.getOwnerComponent().getRouter().navTo("transportscreen", {}, false);                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		selectEH: function(oEvent) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var oTable = this.getView().byId("sprinttable"); //reading                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			var oModel2 = oTable.getModel();                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var aRows = oModel2.getData();                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			var aContexts = oTable.getSelectedContexts(); //finding the checked item                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			sap.m.MessageToast.show(aContexts.length + " " + "row(s) selected.");                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		DETAILEH: function(oEvent) {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var selectedlistdata = oEvent.getParameter("listItem");                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			var Sprintref = selectedlistdata.getProperty("Sprint");                                                                                                                                                                                                     
			var Chgreqref = selectedlistdata.getProperty("Chgreq");                                                                                                                                                                                                     
			var DeployDatref = selectedlistdata.getProperty("DeployDat");                                                                                                                                                                                               
			var Counteref = selectedlistdata.getProperty("Counter");                                                                                                                                                                                                    
			var owneref = selectedlistdata.getProperty("Owner");                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			var dataobject = {};                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			dataobject.Sprint = Sprintref;                                                                                                                                                                                                                              
			dataobject.Chgreq = Chgreqref;                                                                                                                                                                                                                              
			dataobject.DeployDat = DeployDatref;                                                                                                                                                                                                                        
			dataobject.Counter = Counteref;                                                                                                                                                                                                                             
			dataobject.Owner = owneref;                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		GETLISTEH: function(oEvent) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			var startdateref = this.getView().byId("SD1").getValue();                                                                                                                                                                                                   
			var endateref = this.getView().byId("ED1").getValue();                                                                                                                                                                                                      
			if (this.getView().byId("Sprint").getSelectedItems().length > 0) {                                                                                                                                                                                          
				var sprintref = this.getView().byId("Sprint").getSelectedItems();                                                                                                                                                                                          
				// this.getView().byId("Sprint").getSelectedItem().getText();                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				var sprintarray = [];                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				for (var i = 0; i <= sprintref.length; i++) {                                                                                                                                                                                                              
					var item = sprintref[i];                                                                                                                                                                                                                                  
					if (item !== undefined) {                                                                                                                                                                                                                                 
						var context = item.getBindingContext();                                                                                                                                                                                                                  
						var value3 = context.getProperty("Sprint");                                                                                                                                                                                                              
						sprintarray.push(value3);                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (this.getView().byId("Owner").getSelectedItems().length > 0) {                                                                                                                                                                                           
				var ownerref = this.getView().byId("Owner").getSelectedItems();                                                                                                                                                                                            
				// this.getView().byId("Owner1").getSelectedItem().getText();                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				var ownerarray = [];                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
				for (var i = 0; i <= ownerref.length; i++) {                                                                                                                                                                                                               
					var item1 = ownerref[i];                                                                                                                                                                                                                                  
					if (item1 !== undefined) {                                                                                                                                                                                                                                
						var context = item1.getBindingContext();                                                                                                                                                                                                                 
						var value2 = context.getProperty("Owner");                                                                                                                                                                                                               
						ownerarray.push(value2);                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var oTable = this.getView().byId("sprinttable");                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var sUrl = "/sap/opu/odata/sap/ZCA_TRLOG_ANALYTICS_SRV/";                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			var oFilter = new sap.ui.model.Filter({                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
				filters: [],                                                                                                                                                                                                                                               
				and: true                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			});                                                                                                                                                                                                                                                         
			if (this.getView().byId("Sprint").getSelectedItems().length > 0) {                                                                                                                                                                                          
				oFilter.aFilters.push(new sap.ui.model.Filter("Sprint", sap.ui.model.FilterOperator.EQ, sprintarray));                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
			if (this.getView().byId("Owner").getSelectedItems().length > 0) {                                                                                                                                                                                           
				oFilter.aFilters.push(new sap.ui.model.Filter("Owner", sap.ui.model.FilterOperator.EQ, ownerarray));                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
			if (startdateref.length > 0) {                                                                                                                                                                                                                              
				oFilter.aFilters.push(new sap.ui.model.Filter("DeployDat", sap.ui.model.FilterOperator.EQ, startdateref));                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (endateref.length > 0) {                                                                                                                                                                                                                                 
				oFilter.aFilters.push(new sap.ui.model.Filter("DeployDat", sap.ui.model.FilterOperator.EQ, endateref));                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//this.getView().setBusy(true);&nbsp;                                                                                                                                                                                                                       
			var oDataModel = new sap.ui.model.odata.v2.ODataModel(sUrl, {                                                                                                                                                                                               
				json: true,                                                                                                                                                                                                                                                
				loadMetadataAsync: true                                                                                                                                                                                                                                    
			});                                                                                                                                                                                                                                                         
			var oJSONModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                         
			var that = this;                                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
			oDataModel.read("/sprint1Set", {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
				filters: [oFilter],                                                                                                                                                                                                                                        
				success: function(oData, response) {                                                                                                                                                                                                                       
					var DataObject = {};                                                                                                                                                                                                                                      
					DataObject = oData;                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					oJSONModel.setData(DataObject);                                                                                                                                                                                                                           
					//	oTable.setModel(oJSONModel, "Sprint1");                                                                                                                                                                                                                
					that.getView().setModel(oJSONModel, "Sprint1");                                                                                                                                                                                                           
					sap.m.MessageToast.show("Data Read Successfully");                                                                                                                                                                                                        
					this.getView().setBusy(false);                                                                                                                                                                                                                            
				}.bind(this),                                                                                                                                                                                                                                              
				error: function(oError) {                                                                                                                                                                                                                                  
					sap.m.MessageToast.show("Data Read error + oError.responseText");                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			return oJSONModel;                                                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		selectchangedEH: function() {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			var selectedchart = this.getView().byId("chartType").getSelectedItem().getKey();                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var oVizFrame = this.getView().byId("idVizFrame1");                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			switch (selectedchart) {                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				case "line":                                                                                                                                                                                                                                               
					oVizFrame.setVizType("line");                                                                                                                                                                                                                             
					break;                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				case "column":                                                                                                                                                                                                                                             
					oVizFrame.setVizType("column");                                                                                                                                                                                                                           
					break;                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				case "bar":                                                                                                                                                                                                                                                
					oVizFrame.setVizType("bar");                                                                                                                                                                                                                              
					break;                                                                                                                                                                                                                                                    
				case "waterfall":                                                                                                                                                                                                                                          
					oVizFrame.setVizType("waterfall");                                                                                                                                                                                                                        
					break;                                                                                                                                                                                                                                                    
				case "stacked_column":                                                                                                                                                                                                                                     
					oVizFrame.setVizType("stacked_column");                                                                                                                                                                                                                   
					break;                                                                                                                                                                                                                                                    
				case "dual_column":                                                                                                                                                                                                                                        
					oVizFrame.setVizType("dual_column");                                                                                                                                                                                                                      
					break;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		ChartrefreshEH: function() {                                                                                                                                                                                                                                 
			var cstartdateref = this.getView().byId("IDatefrom").getValue();                                                                                                                                                                                            
			var cendateref = this.getView().byId("IDateto").getValue();                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var oTable = this.getView().byId("sprinttable");                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var sUrl = "/sap/opu/odata/sap/ZCA_TRLOG_ANALYTICS_SRV/";                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			var oFilter = new sap.ui.model.Filter({                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
				filters: [],                                                                                                                                                                                                                                               
				and: true                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			if (cstartdateref.length > 0) {                                                                                                                                                                                                                             
				oFilter.aFilters.push(new sap.ui.model.Filter("Date", sap.ui.model.FilterOperator.EQ, cstartdateref));                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (cendateref.length > 0) {                                                                                                                                                                                                                                
				oFilter.aFilters.push(new sap.ui.model.Filter("Date", sap.ui.model.FilterOperator.EQ, cendateref));                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var oDataModel = new sap.ui.model.odata.v2.ODataModel(sUrl, {                                                                                                                                                                                               
				json: true,                                                                                                                                                                                                                                                
				loadMetadataAsync: true                                                                                                                                                                                                                                    
			});                                                                                                                                                                                                                                                         
			var oJSONModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                         
			var that = this;                                                                                                                                                                                                                                            
			oDataModel.read("/TRSet", {                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				filters: [oFilter],                                                                                                                                                                                                                                        
				success: function(oData, response) {                                                                                                                                                                                                                       
					var DataObject = {};                                                                                                                                                                                                                                      
					DataObject = oData;                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					oJSONModel.setData(DataObject);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
					that.getView().setModel(oJSONModel, "Chartdata");                                                                                                                                                                                                         
					sap.m.MessageToast.show("Data Read Successfully");                                                                                                                                                                                                        
					this.getView().setBusy(false);                                                                                                                                                                                                                            
				}.bind(this),                                                                                                                                                                                                                                              
				error: function(oError) {                                                                                                                                                                                                                                  
					sap.m.MessageToast.show("Data Read error + oError.responseText");                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			return oJSONModel;                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		                                                                                                                                                                                                                                                             
		Insertdata:function()                                                                                                                                                                                                                                        
		{                                                                                                                                                                                                                                                            
		var dataobject = {};                                                                                                                                                                                                                                         
	                                                                                                                                                                                                                                                              
	     var tableref = this.getView().byId("itemsid");                                                                                                                                                                                                           
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     var modelo = tableref.getModel();                                                                                                                                                                                                                        
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     var items = tableref.getItems();                                                                                                                                                                                                                         
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     var itemdata = [ ];                                                                                                                                                                                                                                      
	     for( var i = 0; i < items.length; i++ )                                                                                                                                                                                                                  
	     {                                                                                                                                                                                                                                                        
	     var itemrows = items[i].getBindingContext();                                                                                                                                                                                                             
	     var sprint = modelo.getProperty("Sprint" , itemrows);                                                                                                                                                                                                    
	     var epic	= modelo.getProperty("Epic" , itemrows);                                                                                                                                                                                                        
	     var des	= modelo.getProperty("Des" , itemrows);                                                                                                                                                                                                          
	     var teams	= modelo.getProperty("Teams" , itemrows);                                                                                                                                                                                                      
	     var chgreq = modelo.getProperty("Chgreq" , itemrows);                                                                                                                                                                                                    
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                              
	        itemdata.push({                                                                                                                                                                                                                                       
	        	Sprint : sprint,                                                                                                                                                                                                                                     
	        	Epic  : epic,                                                                                                                                                                                                                                        
	        	Des   : des,                                                                                                                                                                                                                                         
	        	Teams : teams,                                                                                                                                                                                                                                       
	        	Chgreq : chgreq                                                                                                                                                                                                                                      
	        });                                                                                                                                                                                                                                                   
	     }                                                                                                                                                                                                                                                        
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     //header data&nbsp;                                                                                                                                                                                                                                      
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     var sprint_h	= this.getView().byId("sprintid").getValue();                                                                                                                                                                                               
	     var chg_h		= this.getView().byId("chgid").getValue();                                                                                                                                                                                                    
		 var dely_h 	= this.getView().byId("deplyid").getValue();                                                                                                                                                                                                    
	     var cnt_h		= this.getView().byId("cntid").getValue();                                                                                                                                                                                                    
	     var owner_h	= this.getView().byId("owerid").getValue();                                                                                                                                                                                                  
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     var dataobject = { };                                                                                                                                                                                                                                    
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     dataobject.Sprint		= sprint_h;                                                                                                                                                                                                                           
	     dataobject.Chgreq		= chg_h;                                                                                                                                                                                                                              
	     dataobject.DeployDat	= dely_h;                                                                                                                                                                                                                           
	     dataobject.Counter 	= cnt_h;                                                                                                                                                                                                                             
	     dataobject.Owner		= owner_h;                                                                                                                                                                                                                             
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	     dataobject.NP_ON_SPRINT = itemdata;                                                                                                                                                                                                                      
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	    var Odataservice = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZCA_TRLOG_ANALYTICS_SRV/");                                                                                                                                                      
	&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                      
	    Odataservice.create("/HeaderSet", dataobject,                                                                                                                                                                                                             
	    {                                                                                                                                                                                                                                                         
	     success:function()                                                                                                                                                                                                                                       
	     {                                                                                                                                                                                                                                                        
	     sap.m.MessageBox.success("Data Inserted");                                                                                                                                                                                                               
	     },                                                                                                                                                                                                                                                       
	     error:function()                                                                                                                                                                                                                                         
	     {                                                                                                                                                                                                                                                        
	      sap.m.MessageBox.error("Data Insertion failed");		                                                                                                                                                                                                      
	     }                                                                                                                                                                                                                                                        
	    	                                                                                                                                                                                                                                                         
	    });                                                                                                                                                                                                                                                       
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                  
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                  
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            