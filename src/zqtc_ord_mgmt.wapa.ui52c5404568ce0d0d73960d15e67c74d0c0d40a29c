sap.ui.define([                                                                                                                                                                                                                                                
	"./BaseController",                                                                                                                                                                                                                                           
	"sap/ui/model/json/JSONModel"                                                                                                                                                                                                                                 
], function (BaseController, JSONModel) {                                                                                                                                                                                                                      
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return BaseController.extend("Block_Orders.Block_Orders.controller.App", {                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		onInit : function () {                                                                                                                                                                                                                                       
			var oViewModel,                                                                                                                                                                                                                                             
				fnSetAppNotBusy,                                                                                                                                                                                                                                           
				iOriginalBusyDelay = this.getView().getBusyIndicatorDelay();                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			oViewModel = new JSONModel({                                                                                                                                                                                                                                
				busy : true,                                                                                                                                                                                                                                               
				delay : 0                                                                                                                                                                                                                                                  
			});                                                                                                                                                                                                                                                         
			this.setModel(oViewModel, "appView");                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			fnSetAppNotBusy = function() {                                                                                                                                                                                                                              
				oViewModel.setProperty("/busy", false);                                                                                                                                                                                                                    
				oViewModel.setProperty("/delay", iOriginalBusyDelay);                                                                                                                                                                                                      
		                                                                                                                                                                                                                                                             
		    this.getOwnerComponent().getModel().read("/TimeSet", {                                                                                                                                                                                                   
                    success: function (data) {                                                                                                                                                                                                                 
                        var iTime = data.results[0].Time * 1000;                                                                                                                                                                                               
                        this.getOwnerComponent()._oErrorHandler._setSessionTimeout(iTime);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                       
                    }.bind(this),                                                                                                                                                                                                                              
                    error: function (err) {                                                                                                                                                                                                                    
                        this.getOwnerComponent()._oErrorHandler._setSessionTimeout(300000);                                                                                                                                                                    
                        // sap.ui.getCore().iTime = "300000";                                                                                                                                                                                                  
                    }.bind(this)                                                                                                                                                                                                                               
                });		                                                                                                                                                                                                                                          
				                                                                                                                                                                                                                                                           
			};                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// disable busy indication when the metadata is loaded and in case of errors                                                                                                                                                                                
			this.getOwnerComponent().getModel().metadataLoaded().                                                                                                                                                                                                       
				then(fnSetAppNotBusy);                                                                                                                                                                                                                                     
			this.getOwnerComponent().getModel().attachMetadataFailed(fnSetAppNotBusy);                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			// apply content density mode to root view                                                                                                                                                                                                                  
			this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());                                                                                                                                                                            
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
});                                                                                                                                                                                                                                                            