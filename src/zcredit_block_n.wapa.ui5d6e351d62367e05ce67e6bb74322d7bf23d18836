sap.ui.define([                                                                                                                                                                                                                                                
	"./BaseController",                                                                                                                                                                                                                                           
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"../model/formatter",                                                                                                                                                                                                                                         
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/model/FilterOperator",                                                                                                                                                                                                                                
	"sap/viz/ui5/format/ChartFormatter",                                                                                                                                                                                                                          
	"sap/ui/core/format/NumberFormat",                                                                                                                                                                                                                            
	"sap/viz/ui5/api/env/Format",                                                                                                                                                                                                                                 
	"sap/viz/ui5/controls/Popover"                                                                                                                                                                                                                                
], function (BaseController, JSONModel, formatter, Filter, FilterOperator, ChartFormatter, NumberFormat, Format, Popover) {                                                                                                                                    
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return BaseController.extend("cob.v2.ZQTC_CREDIT_BLOCKED_ORDERS_SRV.controller.Worklist", {                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		formatter: formatter,                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* lifecycle methods                                           */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Called when the worklist controller is instantiated.                                                                                                                                                                                                      
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onInit: function () {                                                                                                                                                                                                                                        
			// this.getView().setBusy(true);                                                                                                                                                                                                                            
			var oViewModel;                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			// Put down worklist table's original value for busy indicator delay,                                                                                                                                                                                       
			// so it can be restored later on. Busy handling on the table is                                                                                                                                                                                            
			// taken care of by the table itself.                                                                                                                                                                                                                       
			// keeps the search state                                                                                                                                                                                                                                   
			this._aTableSearchState = [];                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Model used to manipulate control states                                                                                                                                                                                                                  
			oViewModel = new JSONModel({                                                                                                                                                                                                                                
				worklistTableTitle: this.getResourceBundle().getText("worklistTableTitle"),                                                                                                                                                                                
				shareOnJamTitle: this.getResourceBundle().getText("worklistTitle"),                                                                                                                                                                                        
				shareSendEmailSubject: this.getResourceBundle().getText("shareSendEmailWorklistSubject"),                                                                                                                                                                  
				shareSendEmailMessage: this.getResourceBundle().getText("shareSendEmailWorklistMessage", [location.href]),                                                                                                                                                 
				tableNoDataText: this.getResourceBundle().getText("tableNoDataText"),                                                                                                                                                                                      
				tableBusyDelay: 0                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			this.setModel(oViewModel, "worklistView");                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			// Make sure, busy indication is showing immediately so there is no                                                                                                                                                                                         
			// break after the busy indication for loading the view's meta data is                                                                                                                                                                                      
			// ended (see promise 'oWhenMetadataIsLoaded' in AppController)                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			//Graphical Data Representation                                                                                                                                                                                                                             
			Format.numericFormatter(ChartFormatter.getInstance());                                                                                                                                                                                                      
			var formatPattern = ChartFormatter.DefaultPattern;                                                                                                                                                                                                          
			var oVizFrame = this.getView().byId("idVizFrame");                                                                                                                                                                                                          
			oVizFrame.setVizProperties({                                                                                                                                                                                                                                
				plotArea: {                                                                                                                                                                                                                                                
					dataLabel: {                                                                                                                                                                                                                                              
						formatString: ChartFormatter.DefaultPattern.STANDARDINTEGER,                                                                                                                                                                                             
						visible: true,                                                                                                                                                                                                                                           
						showTotal: true                                                                                                                                                                                                                                          
					},                                                                                                                                                                                                                                                        
					dataPointStyle: {                                                                                                                                                                                                                                         
						rules: [{                                                                                                                                                                                                                                                
							dataContext: {                                                                                                                                                                                                                                          
								"0-30K": {                                                                                                                                                                                                                                             
									min: 0,                                                                                                                                                                                                                                               
									max: 100000                                                                                                                                                                                                                                           
								}                                                                                                                                                                                                                                                      
							},                                                                                                                                                                                                                                                      
							properties: {                                                                                                                                                                                                                                           
								color: "sapUiChartPaletteSequentialHue1Light1"                                                                                                                                                                                                         
							},                                                                                                                                                                                                                                                      
							displayName: "0-30K"                                                                                                                                                                                                                                    
						}, {                                                                                                                                                                                                                                                     
							dataContext: {                                                                                                                                                                                                                                          
								"31K-60K": {                                                                                                                                                                                                                                           
									min: 0,                                                                                                                                                                                                                                               
									max: 100000                                                                                                                                                                                                                                           
								}                                                                                                                                                                                                                                                      
							},                                                                                                                                                                                                                                                      
							properties: {                                                                                                                                                                                                                                           
								color: "sapUiChartPaletteSemanticCriticalLight2"                                                                                                                                                                                                       
							},                                                                                                                                                                                                                                                      
							displayName: "31K-60K"                                                                                                                                                                                                                                  
						}, {                                                                                                                                                                                                                                                     
							dataContext: {                                                                                                                                                                                                                                          
								"61K-90K": {                                                                                                                                                                                                                                           
									min: 0,                                                                                                                                                                                                                                               
									max: 100000                                                                                                                                                                                                                                           
								}                                                                                                                                                                                                                                                      
							},                                                                                                                                                                                                                                                      
							properties: {                                                                                                                                                                                                                                           
								color: "sapUiChartPaletteSequentialHue2Light1"                                                                                                                                                                                                         
							},                                                                                                                                                                                                                                                      
							displayName: "61K-90K"                                                                                                                                                                                                                                  
						}, {                                                                                                                                                                                                                                                     
							dataContext: {                                                                                                                                                                                                                                          
								">90K": {                                                                                                                                                                                                                                              
									min: 0,                                                                                                                                                                                                                                               
									max: 100000                                                                                                                                                                                                                                           
								}                                                                                                                                                                                                                                                      
							},                                                                                                                                                                                                                                                      
							properties: {                                                                                                                                                                                                                                           
								color: "sapUiChartPaletteSemanticBadLight2"                                                                                                                                                                                                            
							},                                                                                                                                                                                                                                                      
							displayName: ">90K"                                                                                                                                                                                                                                     
						}]                                                                                                                                                                                                                                                       
					}                                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				valueAxis: {                                                                                                                                                                                                                                               
					label: {                                                                                                                                                                                                                                                  
						formatString: formatPattern.STANDARDINTEGER                                                                                                                                                                                                              
					},                                                                                                                                                                                                                                                        
					title: {                                                                                                                                                                                                                                                  
						visible: false                                                                                                                                                                                                                                           
					}                                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				categoryAxis: {                                                                                                                                                                                                                                            
					title: {                                                                                                                                                                                                                                                  
						visible: false                                                                                                                                                                                                                                           
					},                                                                                                                                                                                                                                                        
					label: {                                                                                                                                                                                                                                                  
						style: {                                                                                                                                                                                                                                                 
							fontSize: "0.8rem",                                                                                                                                                                                                                                     
							fontWeight: "bold",                                                                                                                                                                                                                                     
							color: "black"                                                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				legend: {                                                                                                                                                                                                                                                  
					title: {                                                                                                                                                                                                                                                  
						text: "Amount",                                                                                                                                                                                                                                          
						visible: true,                                                                                                                                                                                                                                           
						style: {                                                                                                                                                                                                                                                 
							color: "black"                                                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				title: {                                                                                                                                                                                                                                                   
					visible: false,                                                                                                                                                                                                                                           
					text: "Bar"                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			//viz service call                                                                                                                                                                                                                                          
			var oFilter = [new Filter("Vkorg", "EQ", "1001"), new Filter("Waerk", "EQ", "USD"), new Filter("Agegrp", "EQ", "0-30 days")];                                                                                                                               
			this.serviceCall(oFilter);                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			//Popover Changes&nbsp;                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			var oPopOver = this.getView().byId("idPopOver");                                                                                                                                                                                                            
			oPopOver.setActionItems([{                                                                                                                                                                                                                                  
				type: "action",                                                                                                                                                                                                                                            
				text: "Show Table",                                                                                                                                                                                                                                        
				press: this.onPopoverPress.bind(this)                                                                                                                                                                                                                      
			}]);                                                                                                                                                                                                                                                        
			oPopOver.connect(oVizFrame.getVizUid());                                                                                                                                                                                                                    
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* event handlers                                              */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Triggered by the table's 'updateFinished' event: after new table                                                                                                                                                                                          
		 * data is available, this handler method updates the table counter.                                                                                                                                                                                         
		 * This should only happen if the update was successful, which is                                                                                                                                                                                            
		 * why this handler is attached to 'updateFinished' and not to the                                                                                                                                                                                           
		 * table's list binding's 'dataReceived' method.                                                                                                                                                                                                             
		 * @param {sap.ui.base.Event} oEvent the update finished event                                                                                                                                                                                               
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onUpdateFinished: function (oEvent) {                                                                                                                                                                                                                        
			// update the worklist's object counter after the table update                                                                                                                                                                                              
			var sTitle,                                                                                                                                                                                                                                                 
				oTable = oEvent.getSource(),                                                                                                                                                                                                                               
				iTotalItems = oEvent.getParameter("total");                                                                                                                                                                                                                
			// only update the counter if the length is final and                                                                                                                                                                                                       
			// the table is not empty                                                                                                                                                                                                                                   
			if (iTotalItems && oTable.getBinding("items").isLengthFinal()) {                                                                                                                                                                                            
				sTitle = this.getResourceBundle().getText("worklistTableTitleCount", [iTotalItems]);                                                                                                                                                                       
			} else {                                                                                                                                                                                                                                                    
				sTitle = this.getResourceBundle().getText("worklistTableTitle");                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
			this.getModel("worklistView").setProperty("/worklistTableTitle", sTitle);                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//onSelectData                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		onSelectData: function (oEvent) {                                                                                                                                                                                                                            
			var oMeasureName = oEvent.getParameter("data")[0].data.measureNames;                                                                                                                                                                                        
			var vizCtx = this.getView().byId("idVizDataSet").getBinding("data").getContexts();                                                                                                                                                                          
			var rowCtx = oEvent.getParameter("data")[0].data._context_row_number;                                                                                                                                                                                       
			var dataObj = vizCtx[rowCtx].getObject();                                                                                                                                                                                                                   
			this.DisplayRevenue(oMeasureName, dataObj);                                                                                                                                                                                                                 
			this.Auart = dataObj.Auart;                                                                                                                                                                                                                                 
			this.Vkorg = dataObj.Vkorg;                                                                                                                                                                                                                                 
			this.Waerk = dataObj.Waerk;                                                                                                                                                                                                                                 
			this.Agegrp = dataObj.Agegrp;                                                                                                                                                                                                                               
			// this.oTblKey = this.getView().getModel().createKey("/SALESORDERSET_GET_ENTITYSET", {                                                                                                                                                                     
			// 	Auart: dataObj.Auart,                                                                                                                                                                                                                                   
			// 	Vkorg: dataObj.Vkorg,                                                                                                                                                                                                                                   
			// 	Waerk: dataObj.Waerk,                                                                                                                                                                                                                                   
			// 	Agegrp: dataObj.Agegrp                                                                                                                                                                                                                                  
			// });                                                                                                                                                                                                                                                      
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		DisplayRevenue: function (value, obj) {                                                                                                                                                                                                                      
			var oVizFrame = this.getView().byId("idVizFrame");                                                                                                                                                                                                          
			var popoverProps = {                                                                                                                                                                                                                                        
				"customDataControl": function (data) {                                                                                                                                                                                                                     
					var oCurrency = new Intl.NumberFormat("en-US", {                                                                                                                                                                                                          
						style: "currency",                                                                                                                                                                                                                                       
						currency: obj.Waerk                                                                                                                                                                                                                                      
					});                                                                                                                                                                                                                                                       
					switch (value) {                                                                                                                                                                                                                                          
					case "0-30K":                                                                                                                                                                                                                                             
						var oHBox1 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: data.data.val[0].name + ":",                                                                                                                                                                                                                    
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: data.data.val[0].value                                                                                                                                                                                                                          
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox2 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Revenue" + ":",                                                                                                                                                                                                                                
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: oCurrency.format(obj.Amount1)                                                                                                                                                                                                                   
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox3 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Count" + ":",                                                                                                                                                                                                                                  
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: obj.Count1                                                                                                                                                                                                                                      
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						return new sap.m.VBox({                                                                                                                                                                                                                                  
							items: [oHBox1, oHBox2, oHBox3]                                                                                                                                                                                                                         
						}).addStyleClass("sapUiTinyMargin");                                                                                                                                                                                                                     
					case "31K-60K":                                                                                                                                                                                                                                           
						var oHBox4 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: data.data.val[0].name + ":",                                                                                                                                                                                                                    
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: data.data.val[0].value                                                                                                                                                                                                                          
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox5 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Revenue" + ":",                                                                                                                                                                                                                                
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: oCurrency.format(obj.Amount2)                                                                                                                                                                                                                   
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox6 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Count" + ":",                                                                                                                                                                                                                                  
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: obj.Count2                                                                                                                                                                                                                                      
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						return new sap.m.VBox({                                                                                                                                                                                                                                  
							items: [oHBox4, oHBox5, oHBox6]                                                                                                                                                                                                                         
						}).addStyleClass("sapUiTinyMargin");                                                                                                                                                                                                                     
					case "61K-90K":                                                                                                                                                                                                                                           
						var oHBox7 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: data.data.val[0].name + ":",                                                                                                                                                                                                                    
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: data.data.val[0].value                                                                                                                                                                                                                          
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox8 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Revenue" + ":",                                                                                                                                                                                                                                
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: oCurrency.format(obj.Amount3)                                                                                                                                                                                                                   
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox9 = new sap.m.HBox({                                                                                                                                                                                                                            
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Count" + ":",                                                                                                                                                                                                                                  
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: obj.Count3                                                                                                                                                                                                                                      
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						return new sap.m.VBox({                                                                                                                                                                                                                                  
							items: [oHBox7, oHBox8, oHBox9]                                                                                                                                                                                                                         
						}).addStyleClass("sapUiTinyMargin");                                                                                                                                                                                                                     
					default:                                                                                                                                                                                                                                                  
						var oHBox10 = new sap.m.HBox({                                                                                                                                                                                                                           
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: data.data.val[0].name + ":",                                                                                                                                                                                                                    
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: data.data.val[0].value                                                                                                                                                                                                                          
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox11 = new sap.m.HBox({                                                                                                                                                                                                                           
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Revenue" + ":",                                                                                                                                                                                                                                
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: oCurrency.format(obj.Amount4)                                                                                                                                                                                                                   
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						var oHBox12 = new sap.m.HBox({                                                                                                                                                                                                                           
							items: [                                                                                                                                                                                                                                                
								new sap.m.Label({                                                                                                                                                                                                                                      
									text: "Count" + ":",                                                                                                                                                                                                                                  
									design: "Bold"                                                                                                                                                                                                                                        
								}).addStyleClass("sapUiTinyMarginEnd"),                                                                                                                                                                                                                
								new sap.m.Text({                                                                                                                                                                                                                                       
									text: obj.Count4                                                                                                                                                                                                                                      
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
						return new sap.m.VBox({                                                                                                                                                                                                                                  
							items: [oHBox10, oHBox11, oHBox12]                                                                                                                                                                                                                      
						}).addStyleClass("sapUiTinyMargin");                                                                                                                                                                                                                     
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			};                                                                                                                                                                                                                                                          
			this.oPopOver = new Popover(popoverProps);                                                                                                                                                                                                                  
			this.oPopOver.setActionItems([{                                                                                                                                                                                                                             
				type: "action",                                                                                                                                                                                                                                            
				text: "Show Table",                                                                                                                                                                                                                                        
				press: this.onPopoverPress.bind(this)                                                                                                                                                                                                                      
			}]);                                                                                                                                                                                                                                                        
			this.oPopOver.connect(oVizFrame.getVizUid());                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		// Event on popover press                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		onPopoverPress: function (oEvent) {                                                                                                                                                                                                                          
			this._showObject(oEvent.getSource());                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		serviceCall: function (oparams) {                                                                                                                                                                                                                            
	                                                                                                                                                                                                                                                              
			// var that = this;                                                                                                                                                                                                                                         
			var oVizFrame = this.getView().byId("idVizDataSet");                                                                                                                                                                                                        
			oVizFrame.unbindData();                                                                                                                                                                                                                                     
			oVizFrame.bindData({                                                                                                                                                                                                                                        
				path: "/CreditBlockedSOSet",                                                                                                                                                                                                                               
				template: oVizFrame,                                                                                                                                                                                                                                       
				templateShareable: true,                                                                                                                                                                                                                                   
				filters: oparams,                                                                                                                                                                                                                                          
				events: {                                                                                                                                                                                                                                                  
					dataReceived: function (a) {                                                                                                                                                                                                                              
						// that.getView().setBusy(false);                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onFilterSearch: function (oEvent) {                                                                                                                                                                                                                          
			var that = this;                                                                                                                                                                                                                                            
			var sSet = oEvent.getParameter("selectionSet");                                                                                                                                                                                                             
			if (!sSet[3].getSelectedKeys().length) {                                                                                                                                                                                                                    
				sSet = sSet.slice(0, 3);                                                                                                                                                                                                                                   
			}                                                                                                                                                                                                                                                           
			var filterArray = sSet.map(function (y) {                                                                                                                                                                                                                   
				var name = y.getName();                                                                                                                                                                                                                                    
				var key;                                                                                                                                                                                                                                                   
				try {                                                                                                                                                                                                                                                      
					key = y.getSelectedKey();                                                                                                                                                                                                                                 
					return new Filter(name, "EQ", key);                                                                                                                                                                                                                       
				} catch (oError) {                                                                                                                                                                                                                                         
					key = y.getSelectedKeys();                                                                                                                                                                                                                                
					if (key.length) {                                                                                                                                                                                                                                         
						var mFilters = that.fnmultiFilters(key, name);                                                                                                                                                                                                           
						return mFilters;                                                                                                                                                                                                                                         
					} else {                                                                                                                                                                                                                                                  
						return new Filter(name, "EQ", "");                                                                                                                                                                                                                       
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			that.serviceCall([].concat.apply([], filterArray));                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//External Funciton for filter multi combo box                                                                                                                                                                                                               
		fnmultiFilters: function (key, name) {                                                                                                                                                                                                                       
			var multiMap = key.map(function (args) {                                                                                                                                                                                                                    
				return new Filter(name, "EQ", args);                                                                                                                                                                                                                       
			});                                                                                                                                                                                                                                                         
			return multiMap;                                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler when a table item gets pressed                                                                                                                                                                                                              
		 * @param {sap.ui.base.Event} oEvent the table selectionChange event                                                                                                                                                                                         
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onPress: function (oEvent) {                                                                                                                                                                                                                                 
			// The source is the list item that got pressed                                                                                                                                                                                                             
			this._showObject();                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler for navigating back.                                                                                                                                                                                                                        
		 * We navigate back in the browser history                                                                                                                                                                                                                   
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onNavBack: function () {                                                                                                                                                                                                                                     
			// eslint-disable-next-line sap-no-history-manipulation                                                                                                                                                                                                     
			history.go(-1);                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onSearch: function (oEvent) {                                                                                                                                                                                                                                
			if (oEvent.getParameters().refreshButtonPressed) {                                                                                                                                                                                                          
				// Search field's 'refresh' button has been pressed.                                                                                                                                                                                                       
				// This is visible if you select any master list item.                                                                                                                                                                                                     
				// In this case no new search is triggered, we only                                                                                                                                                                                                        
				// refresh the list binding.                                                                                                                                                                                                                               
				this.onRefresh();                                                                                                                                                                                                                                          
			} else {                                                                                                                                                                                                                                                    
				var aTableSearchState = [];                                                                                                                                                                                                                                
				var sQuery = oEvent.getParameter("query");                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				if (sQuery && sQuery.length > 0) {                                                                                                                                                                                                                         
					aTableSearchState = [new Filter("Age", FilterOperator.Contains, sQuery)];                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				this._applySearch(aTableSearchState);                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler for refresh event. Keeps filter, sort                                                                                                                                                                                                       
		 * and group settings and refreshes the list binding.                                                                                                                                                                                                        
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onRefresh: function () {                                                                                                                                                                                                                                     
			var oTable = this.byId("table");                                                                                                                                                                                                                            
			oTable.getBinding("items").refresh();                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* internal methods                                            */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Shows the selected item on the object page                                                                                                                                                                                                                
		 * On phones a additional history entry is created                                                                                                                                                                                                           
		 * @param {sap.m.ObjectListItem} oItem selected Item                                                                                                                                                                                                         
		 * @private                                                                                                                                                                                                                                                  
		 */                                                                                                                                                                                                                                                          
		_showObject: function () {                                                                                                                                                                                                                                   
			this.getRouter().navTo("object", {                                                                                                                                                                                                                          
				Vkorg: this.Vkorg,                                                                                                                                                                                                                                         
				Waerk: this.Waerk,                                                                                                                                                                                                                                         
				Agegrp: this.Agegrp,                                                                                                                                                                                                                                       
				Auart: this.Auart                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			var oVizFrame = this.getView().byId("idVizFrame");                                                                                                                                                                                                          
			oVizFrame.vizSelection([], {                                                                                                                                                                                                                                
				"clearSelection": true                                                                                                                                                                                                                                     
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Internal helper method to apply both filter and search state together on the list binding                                                                                                                                                                 
		 * @param {sap.ui.model.Filter[]} aTableSearchState An array of filters for the search                                                                                                                                                                       
		 * @private                                                                                                                                                                                                                                                  
		 */                                                                                                                                                                                                                                                          
		_applySearch: function (aTableSearchState) {                                                                                                                                                                                                                 
			var oTable = this.byId("table"),                                                                                                                                                                                                                            
				oViewModel = this.getModel("worklistView");                                                                                                                                                                                                                
			oTable.getBinding("items").filter(aTableSearchState, "Application");                                                                                                                                                                                        
			// changes the noDataText of the list in case there are no filter results                                                                                                                                                                                   
			if (aTableSearchState.length !== 0) {                                                                                                                                                                                                                       
				oViewModel.setProperty("/tableNoDataText", this.getResourceBundle().getText("worklistNoDataWithSearchText"));                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            