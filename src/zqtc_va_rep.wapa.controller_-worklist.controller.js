sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,s,a,i){"use strict";return e.extend("orders.ZQTC_SALES_VA.controller.Worklist",{formatter:s,onInit:func+
tion(){var e,s,a=this.byId("table");this.oJsonDataT=new t([],true);this.getView().setModel(this.oJsonDataT,"BTsel");s=a.getBusyIndicatorDelay();this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText("worklistTableTitle"),+
shareOnJamTitle:this.getResourceBundle().getText("worklistTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorklistMessage",[location.hre+
f]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText"),tableBusyDelay:0});this.setModel(e,"worklistView");a.attachEventOnce("updateFinished",function(){e.setProperty("/tableBusyDelay",s)})},onUpdateFinished:function(e){var t,s=e.getSourc+
e(),a=e.getParameter("total");if(a&&s.getBinding("items").isLengthFinal()){t=this.getResourceBundle().getText("worklistTableTitleCount",[a])}else{t=this.getResourceBundle().getText("worklistTableTitle")}this.getModel("worklistView").setProperty("/worklis+
tTableTitle",t)},onPress:function(e){this._showObject(e.getSource())},onNavBack:function(){history.go(-1)},VA05dataEH:function(e){var t={};var s=0;var a=0;var i=new sap.ui.model.Filter({filters:[],and:true});debugger;var r=new sap.ui.model.odata.v2.OData+
Model("/sap/opu/odata/sap/ZQTC_VA_REP_SRV",{json:true,loadMetadataAsync:true});r.read("/VA05Set",{success:function(e,t){var s=new sap.ui.model.json.JSONModel;s.setData(e);sap.ui.getCore().setModel(s);this.getView().setModel(s,"VA05")}.bind(this),error:fu+
nction(e){sap.m.MessageToast.show("Error in VA05 data refresh")}})},VA25dataEH:function(e){var t={};var s=0;var a=0;var i=new sap.ui.model.Filter({filters:[],and:true});debugger;var r=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/ZQTC_VA_REP_S+
RV",{json:true,loadMetadataAsync:true});r.read("/VA25Set",{success:function(e,t){var s=new sap.ui.model.json.JSONModel;s.setData(e);sap.ui.getCore().setModel(s);this.getView().setModel(s,"VA25")}.bind(this),error:function(e){sap.m.MessageToast.show("Erro+
r in VA25 data refresh")}})},VA45dataEH:function(e){var t={};var s=0;var s=0;var a=new sap.ui.model.Filter({filters:[],and:true});debugger;var i=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/ZQTC_VA_REP_SRV",{json:true,loadMetadataAsync:true})+
;i.read("/VA45Set",{success:function(e,t){var s=new sap.ui.model.json.JSONModel;s.setData(e);sap.ui.getCore().setModel(s);this.getView().setModel(s,"VA45")}.bind(this),error:function(e){sap.m.MessageToast.show("Error in VA45 data refresh")}})},SelTabEH:f+
unction(e){debugger;this.getView().byId("idva05").setVisible(false);this.getView().byId("idva25").setVisible(false);this.getView().byId("idva45").setVisible(false);var t=this.getView().byId("idva05");var s=this.getView().byId("cbtcodes").getSelectedItem(+
).getKey();if(s==="VA05"){this.VA05dataEH();this.getView().byId("idva05").setVisible(true)}if(s==="VA25"){this.VA25dataEH();this.getView().byId("idva25").setVisible(true)}if(s==="VA45"){this.VA45dataEH();this.getView().byId("idva45").setVisible(true)}},i+
nputBsf:"",fragmentBsf:null,SelfldsEH:function(e){this.inputBso=e.getSource().getId();if(this.fragmentBso===null){this.fragmentBso=new sap.ui.xmlfragment("Block_Orders.Block_Orders.view.fragmentOrder",this);this.fragmentBso.setTitle("Sales Orders ");this+
.getView().addDependent(this.fragmentBso)}this.fragmentBso.open()},cancelBSO:function(){this.fragmentBso.close()},rowSelectionBso:function(e){var t=sap.ui.getCore().byId("BSOTable");if(e.getParameter("listItems").length>1&&e.getParameter("selected")===tr+
ue){for(var s=0;s<e.getParameter("listItems").length;s++){var a=e.getParameter("listItems")[s].getBindingContext("Billing").getProperty("Vbeln");this.getView().getModel("Bsosel").getData().push({Vbeln:a});this.getView().getModel("Bsosel").updateBindings(+
true)}}else{var i=e.getParameter("listItem").getBindingContext("Billing").getProperty("Vbeln");if(e.getParameter("listItem").getProperty("selected")===true){this.getView().getModel("Bsosel").getData().push({Vbeln:i});this.getView().getModel("Bsosel").upd+
ateBindings(true)}else{this.getView().getModel("Bsosel").getData().pop({Vbeln:i});this.getView().getModel("Bsosel").updateBindings(true)}}if(e.getParameter("listItems").length>1&&e.getParameter("selected")===false){this.getView().getModel("Bsosel").setDa+
ta([])}},acceptBSO:function(e){this.getView().byId("Bso").removeAllTokens();var t=[];var s=sap.ui.getCore().byId("BSOselTable");var a=s.getItems();if(a.length>0){for(var i=0;i<a.length;i++){var r=a[i].getBindingContext("Bsosel").getProperty("Vbeln");var +
o=new sap.m.Token({text:r});this.getView().byId("Bso").addToken(o);sap.ui.getCore().Bso=r;t.push(r)}sap.ui.getCore().multiBso=t;sap.ui.getCore().byId("BSOTable").removeSelections(true)}else{sap.ui.getCore().Bso=null;sap.ui.getCore().multiBso=[]}this.frag+
mentBso.close()},clearBSO:function(){var e=sap.ui.getCore().byId("BSOTable");var t=e.getSelectedItems();if(t.length>0){e.removeSelections(true);var s=this.getView().byId("Bso").getTokens();this.getView().byId("Bso").destroyTokens([s]);sap.ui.getCore().mu+
ltiBso=[]}this.getView().getModel("Bsosel").setData([]);var a=sap.ui.getCore().byId("mySearch");a.setValue(null);this.getView().byId("Bso").removeAllTokens()},deleteSelectionBso:function(e){var t=e.getParameter("listItem");var s=sap.ui.getCore().byId("BS+
OselTable");s.removeItem(t)},searchEHO:function(e){var t=e.getParameter("query");var s=new sap.ui.model.Filter("Vbeln",sap.ui.model.FilterOperator.EQ,t);var a=sap.ui.getCore().byId("BSOTable");var i=a.getBinding("items");i.filter(s);a.removeSelections(tr+
ue)},BsoChange:function(e){var t=e.getParameter("type");if(t==="removed"){var s=e.getParameter("token").getText();this.getView().getModel("Bsosel").getData().pop({Kunnr:s});this.getView().getModel("Bsosel").updateBindings(true);var a=[];var i=this.getVie+
w().byId("Kunnr").getTokens();if(i.length>0){for(var r=0;r<i.length;r++){var o=i[r].getProperty("text");a.push(o)}sap.ui.getCore().multiMedia=a}else{sap.ui.getCore().multiMedia=[];sap.ui.getCore().media=null}this.BillRefreshEH(e)()}},onSearch:function(e)+
{if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{var t=[];var s=e.getParameter("query");if(s&&s.length>0){t=[new a("Posnr",i.Contains,s)]}this._applySearch(t)}},onRefresh:function(){var e=this.byId("table");e.getBinding("items").refresh(+
)},_showObject:function(e){this.getRouter().navTo("object",{objectId:e.getBindingContext().getProperty("Vbeln")})},_applySearch:function(e){var t=this.byId("table"),s=this.getModel("worklistView");t.getBinding("items").filter(e,"Application");if(e.length+
!==0){s.setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}}})});                                                                                                                                                