/*global XLSX*/                                                                                                                                                                                                                                                
sap.ui.define([                                                                                                                                                                                                                                                
	"./BaseController",                                                                                                                                                                                                                                           
	'sap/ui/core/IconPool',                                                                                                                                                                                                                                       
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	'sap/m/Link',                                                                                                                                                                                                                                                 
	'sap/m/MessageItem',                                                                                                                                                                                                                                          
	'sap/m/MessageView',                                                                                                                                                                                                                                          
	'sap/m/Button',                                                                                                                                                                                                                                               
	'sap/m/Dialog',                                                                                                                                                                                                                                               
	'sap/m/Bar',                                                                                                                                                                                                                                                  
	'sap/m/Title',                                                                                                                                                                                                                                                
	"../model/formatter",                                                                                                                                                                                                                                         
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/model/Sorter",                                                                                                                                                                                                                                        
	"sap/ui/model/odata/v2/ODataModel",                                                                                                                                                                                                                           
	"sap/ui/model/FilterOperator",                                                                                                                                                                                                                                
	'sap/m/MessageToast'                                                                                                                                                                                                                                          
], function (BaseController, IconPool, JSONModel, Link, MessageItem, MessageView, Button, Dialog, Bar,                                                                                                                                                         
	Title, formatter, Filter, Sorter, FilterOperator, MessageToast) {                                                                                                                                                                                             
	"use strict";                                                                                                                                                                                                                                                 
	var documentNo, compCode, fYear, errLog, tabColumns, startTime, respTime;                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
	return BaseController.extend("journal_upload.JOURNAL_UPLOAD.controller.Worklist", {                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		formatter: formatter,                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* lifecycle methods                                           */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Called when the worklist controller is instantiated.                                                                                                                                                                                                      
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onInit: function () {                                                                                                                                                                                                                                        
			var oViewModel,                                                                                                                                                                                                                                             
				iOriginalBusyDelay,                                                                                                                                                                                                                                        
				oTable = this.byId("table");                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			this.localModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                        
			this.getView().setModel(this.localModel, "localModel");                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			/*	this._initialData = {                                                                                                                                                                                                                                    
				columns: [                                                                                                                                                                                                                                                 
					{visible: true, name: "HKONT", label: "GL Account"},                                                                                                                                                                                                      
					{visible: true, name: "KUNNR", label: "Customer"},                                                                                                                                                                                                        
					{visible: true, name: "LIFNR", label: "Vendor"},                                                                                                                                                                                                          
					{visible: true, name: "DMBTR", label: "Amount"},                                                                                                                                                                                                          
					{visible: true, name: "ZTERM", label: "Payment Terms"},                                                                                                                                                                                                   
					{visible: true, name: "ZSCHL", label: "Payment Method"},                                                                                                                                                                                                  
					{visible: true, name: "ZFBDT", label: "Baseline due date"},                                                                                                                                                                                               
					{visible: true, name: "ZUONR", label: "Assignment"},                                                                                                                                                                                                      
					{visible: true, name: "SGTXT", label: "Item Text"},                                                                                                                                                                                                       
					{visible: true, name: "PRCTR", label: "Profit Center"},                                                                                                                                                                                                   
					{visible: true, name: "SEGMENT", label: "Segment"},                                                                                                                                                                                                       
					{visible: true, name: "KOSTL", label: "Cost Center"},                                                                                                                                                                                                     
					{visible: true, name: "MWSKZ", label: "Tax Code"},                                                                                                                                                                                                        
					{visible: true, name: "TXJCD", label: "Tax Jurisdiction"},                                                                                                                                                                                                
					{visible: true, name: "ZUFNR", label: "Order Number"},                                                                                                                                                                                                    
					{visible: true, name: "PS_POSID", label: "WBS Element"},                                                                                                                                                                                                  
					{visible: true, name: "VALUT", label: "Value date"},                                                                                                                                                                                                      
					{visible: true, name: "HBKID", label: "House Bank"},                                                                                                                                                                                                      
					{visible: true, name: "HKTID", label: "House Bank Account"},                                                                                                                                                                                              
					{visible: true, name: "VUBND", label: "Trading Partner"},                                                                                                                                                                                                 
					{visible: true, name: "ITM_BUKRS", label: "Trading Partner Company Code"},                                                                                                                                                                                
					{visible: true, name: "FIPEX", label: "Commentment item"},                                                                                                                                                                                                
					{visible: true, name: "RMVCT", label: "Transaction Type"},                                                                                                                                                                                                
					{visible: true, name: "SP_GL_IND", label: "Special GL indicator"},                                                                                                                                                                                        
					{visible: true, name: "DMBE2", label: "Amount in second local currency"}                                                                                                                                                                                  
				],                                                                                                                                                                                                                                                         
				sort: [                                                                                                                                                                                                                                                    
					{sorted: false, name: "HKONT", label: "GL Account", descending: false},                                                                                                                                                                                   
					{sorted: false, name: "KUNNR", label: "Customer"},                                                                                                                                                                                                        
					{sorted: false, name: "LIFNR", label: "Vendor"},                                                                                                                                                                                                          
					{sorted: false, name: "DMBTR", label: "Amount", descending: false},                                                                                                                                                                                       
					{sorted: false, name: "ZTERM", label: "Payment Terms"},                                                                                                                                                                                                   
					{sorted: false, name: "ZSCHL", label: "Payment Method"},                                                                                                                                                                                                  
					{sorted: false, name: "ZFBDT", label: "Baseline due date"},                                                                                                                                                                                               
					{sorted: false, name: "ZUONR", label: "Assignment"},                                                                                                                                                                                                      
					{sorted: false, name: "SGTXT", label: "Item Text"},                                                                                                                                                                                                       
					{sorted: false, name: "PRCTR", label: "Profit Center"},                                                                                                                                                                                                   
					{sorted: false, name: "SEGMENT", label: "Segment"},                                                                                                                                                                                                       
					{sorted: false, name: "KOSTL", label: "Cost Center"},                                                                                                                                                                                                     
					{sorted: false, name: "MWSKZ", label: "Tax Code"},                                                                                                                                                                                                        
					{sorted: false, name: "TXJCD", label: "Tax Jurisdiction"},                                                                                                                                                                                                
					{sorted: false, name: "ZUFNR", label: "Order Number"},                                                                                                                                                                                                    
					{sorted: false, name: "PS_POSID", label: "WBS Element"},                                                                                                                                                                                                  
					{sorted: false, name: "VALUT", label: "Value date"},                                                                                                                                                                                                      
					{sorted: false, name: "HBKID", label: "House Bank"},                                                                                                                                                                                                      
					{sorted: false, name: "HKTID", label: "House Bank Account"},                                                                                                                                                                                              
					{sorted: false, name: "VUBND", label: "Trading Partner"},                                                                                                                                                                                                 
					{sorted: false, name: "ITM_BUKRS", label: "Trading Partner Company Code"},                                                                                                                                                                                
					{sorted: false, name: "FIPEX", label: "Commentment item"},                                                                                                                                                                                                
					{sorted: false, name: "RMVCT", label: "Transaction Type"},                                                                                                                                                                                                
					{sorted: false, name: "SP_GL_IND", label: "Special GL indicator"},                                                                                                                                                                                        
					{sorted: false, name: "DMBE2", label: "Amount in second local currency"}                                                                                                                                                                                  
				],                                                                                                                                                                                                                                                         
				group: [                                                                                                                                                                                                                                                   
					{grouped: false, name: "HKONT", label: "GL Account"},                                                                                                                                                                                                     
					{grouped: false, name: "DMBTR", label: "Amount"}                                                                                                                                                                                                          
				]                                                                                                                                                                                                                                                          
				//filter : [{key: "BSCHL", columnKey: "Posting Key", operation:"EQ", exclude:false, value1:"100", value2:""}]                                                                                                                                              
				};                                                                                                                                                                                                                                                         
				//var filter = [{key: "BSCHL", columnKey: "Posting Key", operation:"EQ", exclude:false, value1:"100", value2:""}];                                                                                                                                         
				var filter = [];                                                                                                                                                                                                                                           
				var filterKey = [                                                                                                                                                                                                                                          
					{key: "HKONT", columnKey: "GL Account"},                                                                                                                                                                                                                  
					{key: "KUNNR", columnKey: "Customer"},                                                                                                                                                                                                                    
					{key: "LIFNR", columnKey: "Vendor"},                                                                                                                                                                                                                      
					{key: "DMBTR", columnKey: "Amount", type:"decimal"},                                                                                                                                                                                                      
					{key: "DMBE2", columnKey: "Amount in second local currency", typr:"decimal"},                                                                                                                                                                             
					{key: "ZTERM", columnKey: "Payment Terms"},                                                                                                                                                                                                               
					{key: "ZSCHL", columnKey: "Payment Method"},                                                                                                                                                                                                              
					{key: "ZFBDT", columnKey: "Baseline due date", type:"date"},                                                                                                                                                                                              
					{key: "ZUONR", columnKey: "Assignment"},                                                                                                                                                                                                                  
					{key: "SGTXT", columnKey: "Item Text", type:"string"},                                                                                                                                                                                                    
					{key: "PRCTR", columnKey: "Profit Center"},                                                                                                                                                                                                               
					{key: "SEGMENT", columnKey: "Segment"},                                                                                                                                                                                                                   
					{key: "KOSTL", columnKey: "Cost Center"},                                                                                                                                                                                                                 
					{key: "MWSKZ", columnKey: "Tax Code"},                                                                                                                                                                                                                    
					{key: "TXJCD", columnKey: "Tax Jurisdiction"},                                                                                                                                                                                                            
					{key: "ZUFNR", columnKey: "Order Number"},                                                                                                                                                                                                                
					{key: "PS_POSID", columnKey: "WBS Element"},                                                                                                                                                                                                              
					{key: "VALUT", columnKey: "Value date", type:"date"},                                                                                                                                                                                                     
					{key: "HBKID", columnKey: "House Bank"},                                                                                                                                                                                                                  
					{key: "HKTID", columnKey: "House Bank Account"},                                                                                                                                                                                                          
					{key: "VUBND", columnKey: "Trading Partner"},                                                                                                                                                                                                             
					{kay: "ITM_BUKRS", columnKey: "Trading Partner Company Code"},                                                                                                                                                                                            
					{key: "FIPEX", columnKey: "Commentment item"},                                                                                                                                                                                                            
					{key: "RMVCT", columnKey: "Transaction Type"},                                                                                                                                                                                                            
					{key: "SP_GL_IND", columnKey: "Special GL indicator"}                                                                                                                                                                                                     
				];                                                                                                                                                                                                                                                         
				this.filterModel = new JSONModel();                                                                                                                                                                                                                        
				this.filterModel.setData({items:filter, keys:filterKey});                                                                                                                                                                                                  
				this.getView().setModel(this.filterModel,"filterModel");                                                                                                                                                                                                   
				*/                                                                                                                                                                                                                                                         
			this._initP13nData();                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			tabColumns = this.getView().byId("table").getColumns();                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			//this.paraModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                       
			//this.getView().setModel(this.paraModel, "paraModel");                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			// Put down worklist table's original value for busy indicator delay,                                                                                                                                                                                       
			// so it can be restored later on. Busy handling on the table is                                                                                                                                                                                            
			// taken care of by the table itself.                                                                                                                                                                                                                       
			iOriginalBusyDelay = oTable.getBusyIndicatorDelay();                                                                                                                                                                                                        
			// keeps the search state                                                                                                                                                                                                                                   
			this._aTableSearchState = [];                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Model used to manipulate control states                                                                                                                                                                                                                  
			oViewModel = new JSONModel({                                                                                                                                                                                                                                
				worklistTableTitle: this.getResourceBundle().getText("worklistTableTitle"),                                                                                                                                                                                
				shareOnJamTitle: this.getResourceBundle().getText("worklistTitle"),                                                                                                                                                                                        
				shareSendEmailSubject: this.getResourceBundle().getText("shareSendEmailWorklistSubject"),                                                                                                                                                                  
				shareSendEmailMessage: this.getResourceBundle().getText("shareSendEmailWorklistMessage", [location.href]),                                                                                                                                                 
				tableNoDataText: this.getResourceBundle().getText("tableNoDataText"),                                                                                                                                                                                      
				tableBusyDelay: 0                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			this.setModel(oViewModel, "worklistView");                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			// Make sure, busy indication is showing immediately so there is no                                                                                                                                                                                         
			// break after the busy indication for loading the view's meta data is                                                                                                                                                                                      
			// ended (see promise 'oWhenMetadataIsLoaded' in AppController)                                                                                                                                                                                             
			oTable.attachEventOnce("updateFinished", function () {                                                                                                                                                                                                      
				// Restore original busy indicator delay for worklist's table                                                                                                                                                                                              
				oViewModel.setProperty("/tableBusyDelay", iOriginalBusyDelay);                                                                                                                                                                                             
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.oMessageView = new MessageView();                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			/******************************************************************************/                                                                                                                                                                            
			var that = this;                                                                                                                                                                                                                                            
			/*	var	oLink = new Link({                                                                                                                                                                                                                                   
					text: "Show more information",                                                                                                                                                                                                                            
					href: "http://sap.com",                                                                                                                                                                                                                                   
					target: "_blank"                                                                                                                                                                                                                                          
				}); */                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			var oMessageTemplate = new sap.m.MessageItem({                                                                                                                                                                                                              
				type: '{type}',                                                                                                                                                                                                                                            
				title: '{title}',                                                                                                                                                                                                                                          
				description: '{description}',                                                                                                                                                                                                                              
				subtitle: '{subtitle}',                                                                                                                                                                                                                                    
				counter: '{counter}',                                                                                                                                                                                                                                      
				markupDescription: '{markupDescription}'                                                                                                                                                                                                                   
					//link: oLink                                                                                                                                                                                                                                             
			});                                                                                                                                                                                                                                                         
			debugger;                                                                                                                                                                                                                                                   
			/*	var messages=[];                                                                                                                                                                                                                                         
				for(var item in errorDetails){                                                                                                                                                                                                                             
					var line = {};                                                                                                                                                                                                                                            
					line['type'] = 'Error';                                                                                                                                                                                                                                   
					line['title'] = errorDetails[item]['message'];                                                                                                                                                                                                            
					line['subtitle'] = errorDetails[item]['code'];                                                                                                                                                                                                            
					line['description'] = ' ';                                                                                                                                                                                                                                
					messages.push(line);                                                                                                                                                                                                                                      
				} */                                                                                                                                                                                                                                                       
			this.logModel = new JSONModel();                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			this.oMessageView = new sap.m.MessageView({                                                                                                                                                                                                                 
				showDetailsPageHeader: false,                                                                                                                                                                                                                              
				itemSelect: function () {                                                                                                                                                                                                                                  
					oBackButton.setVisible(true);                                                                                                                                                                                                                             
				},                                                                                                                                                                                                                                                         
				items: {                                                                                                                                                                                                                                                   
					path: "/",                                                                                                                                                                                                                                                
					template: oMessageTemplate                                                                                                                                                                                                                                
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			var oBackButton = new Button({                                                                                                                                                                                                                              
				icon: IconPool.getIconURI("nav-back"),                                                                                                                                                                                                                     
				visible: false,                                                                                                                                                                                                                                            
				press: function () {                                                                                                                                                                                                                                       
					that.oMessageView.navigateBack();                                                                                                                                                                                                                         
					this.setVisible(false);                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.oDialog = new sap.m.Dialog({                                                                                                                                                                                                                           
				resizable: true,                                                                                                                                                                                                                                           
				content: this.oMessageView,                                                                                                                                                                                                                                
				state: 'Error',                                                                                                                                                                                                                                            
				beginButton: new Button({                                                                                                                                                                                                                                  
					press: function () {                                                                                                                                                                                                                                      
						this.getParent().close();                                                                                                                                                                                                                                
					},                                                                                                                                                                                                                                                        
					text: "Close"                                                                                                                                                                                                                                             
				}),                                                                                                                                                                                                                                                        
				customHeader: new Bar({                                                                                                                                                                                                                                    
					contentLeft: [oBackButton],                                                                                                                                                                                                                               
					contentMiddle: [                                                                                                                                                                                                                                          
						new Title({                                                                                                                                                                                                                                              
							text: "Error Log"                                                                                                                                                                                                                                       
						})                                                                                                                                                                                                                                                       
					]                                                                                                                                                                                                                                                         
				}),                                                                                                                                                                                                                                                        
				contentHeight: "50%",                                                                                                                                                                                                                                      
				contentWidth: "50%",                                                                                                                                                                                                                                       
				verticalScrolling: false                                                                                                                                                                                                                                   
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			//oMessageView.navigateBack();                                                                                                                                                                                                                              
			//oDialog.open();                                                                                                                                                                                                                                           
			/******************************************************************************/                                                                                                                                                                            
			documentNo = undefined;                                                                                                                                                                                                                                     
			compCode = undefined;                                                                                                                                                                                                                                       
			fYear = undefined;                                                                                                                                                                                                                                          
			errLog = undefined;                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.handleFullScreen();                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* event handlers                                              */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Triggered by the table's 'updateFinished' event: after new table                                                                                                                                                                                          
		 * data is available, this handler method updates the table counter.                                                                                                                                                                                         
		 * This should only happen if the update was successful, which is                                                                                                                                                                                            
		 * why this handler is attached to 'updateFinished' and not to the                                                                                                                                                                                           
		 * table's list binding's 'dataReceived' method.                                                                                                                                                                                                             
		 * @param {sap.ui.base.Event} oEvent the update finished event                                                                                                                                                                                               
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onUpdateFinished: function (oEvent) {                                                                                                                                                                                                                        
			// update the worklist's object counter after the table update                                                                                                                                                                                              
			var sTitle,                                                                                                                                                                                                                                                 
				oTable = oEvent.getSource(),                                                                                                                                                                                                                               
				iTotalItems = oEvent.getParameter("total");                                                                                                                                                                                                                
			// only update the counter if the length is final and                                                                                                                                                                                                       
			// the table is not empty                                                                                                                                                                                                                                   
			if (iTotalItems && oTable.getBinding("items").isLengthFinal()) {                                                                                                                                                                                            
				sTitle = this.getResourceBundle().getText("worklistTableTitleCount", [iTotalItems]);                                                                                                                                                                       
			} else {                                                                                                                                                                                                                                                    
				sTitle = this.getResourceBundle().getText("worklistTableTitle");                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
			this.getModel("worklistView").setProperty("/worklistTableTitle", sTitle);                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler when a table item gets pressed                                                                                                                                                                                                              
		 * @param {sap.ui.base.Event} oEvent the table selectionChange event                                                                                                                                                                                         
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onPress: function (oEvent) {                                                                                                                                                                                                                                 
			// The source is the list item that got pressed                                                                                                                                                                                                             
			this._showObject(oEvent.getSource());                                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler for navigating back.                                                                                                                                                                                                                        
		 * We navigate back in the browser history                                                                                                                                                                                                                   
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onNavBack: function () {                                                                                                                                                                                                                                     
			// eslint-disable-next-line sap-no-history-manipulation                                                                                                                                                                                                     
			history.go(-1);                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/*	onSearch: function (oEvent) {                                                                                                                                                                                                                             
				if (oEvent.getParameters().refreshButtonPressed) {                                                                                                                                                                                                         
					// Search field's 'refresh' button has been pressed.                                                                                                                                                                                                      
					// This is visible if you select any master list item.                                                                                                                                                                                                    
					// In this case no new search is triggered, we only                                                                                                                                                                                                       
					// refresh the list binding.                                                                                                                                                                                                                              
					this.onRefresh();                                                                                                                                                                                                                                         
				} else {                                                                                                                                                                                                                                                   
					debugger;                                                                                                                                                                                                                                                 
					var aTableSearchState = [];                                                                                                                                                                                                                               
					var sQuery = oEvent.getParameter("query");                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
					if (sQuery && sQuery.length > 0) {                                                                                                                                                                                                                        
						aTableSearchState = [new Filter("PRCTR", "GT", sQuery)];                                                                                                                                                                                                 
					}                                                                                                                                                                                                                                                         
					this._applySearch(aTableSearchState);                                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}, */                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Event handler for refresh event. Keeps filter, sort                                                                                                                                                                                                       
		 * and group settings and refreshes the list binding.                                                                                                                                                                                                        
		 * @public                                                                                                                                                                                                                                                   
		 */                                                                                                                                                                                                                                                          
		onRefresh: function () {                                                                                                                                                                                                                                     
			debugger;                                                                                                                                                                                                                                                   
			//var oTable = this.byId("table");                                                                                                                                                                                                                          
			//oTable.getBinding("items").refresh();                                                                                                                                                                                                                     
			//this.getView().getModel().updateBindings();                                                                                                                                                                                                               
			this.localModel.setData();                                                                                                                                                                                                                                  
			this.localModel.refresh(true);                                                                                                                                                                                                                              
			this.getView().byId("fileUploader").setValue("");                                                                                                                                                                                                           
			documentNo = undefined;                                                                                                                                                                                                                                     
			compCode = undefined;                                                                                                                                                                                                                                       
			fYear = undefined;                                                                                                                                                                                                                                          
			errLog = undefined;                                                                                                                                                                                                                                         
			this._setInitialData();                                                                                                                                                                                                                                     
			this.getView().byId("filterPanel").updateBindings();                                                                                                                                                                                                        
			this.getView().byId("subCount").setText("");                                                                                                                                                                                                                
			this.getView().byId("begening").setEnabled(false);                                                                                                                                                                                                          
			this.getView().byId("previous").setEnabled(false);                                                                                                                                                                                                          
			this.getView().byId("next").setEnabled(false);                                                                                                                                                                                                              
			this.getView().byId("end").setEnabled(false);                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* internal methods                                            */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Shows the selected item on the object page                                                                                                                                                                                                                
		 * On phones a additional history entry is created                                                                                                                                                                                                           
		 * @param {sap.m.ObjectListItem} oItem selected Item                                                                                                                                                                                                         
		 * @private                                                                                                                                                                                                                                                  
		 */                                                                                                                                                                                                                                                          
		_showObject: function (oItem) {                                                                                                                                                                                                                              
			this.getRouter().navTo("object", {                                                                                                                                                                                                                          
				objectId: oItem.getBindingContext().getProperty("SlNo")                                                                                                                                                                                                    
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/**                                                                                                                                                                                                                                                          
		 * Internal helper method to apply both filter and search state together on the list binding                                                                                                                                                                 
		 * @param {sap.ui.model.Filter[]} aTableSearchState An array of filters for the search                                                                                                                                                                       
		 * @private                                                                                                                                                                                                                                                  
		 */                                                                                                                                                                                                                                                          
		_applySearch: function (aTableSearchState) {                                                                                                                                                                                                                 
			var oTable = this.byId("table"),                                                                                                                                                                                                                            
				oViewModel = this.getModel("worklistView");                                                                                                                                                                                                                
			debugger;                                                                                                                                                                                                                                                   
			oTable.getBinding("rows").filter(aTableSearchState, "Application");                                                                                                                                                                                         
			// changes the noDataText of the list in case there are no filter results                                                                                                                                                                                   
			if (aTableSearchState.length !== 0) {                                                                                                                                                                                                                       
				oViewModel.setProperty("/tableNoDataText", this.getResourceBundle().getText("worklistNoDataWithSearchText"));                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_applySort: function (aTableSortState) {                                                                                                                                                                                                                     
			var oTable = this.byId("table"),                                                                                                                                                                                                                            
				oViewModel = this.getModel("worklistView");                                                                                                                                                                                                                
			debugger;                                                                                                                                                                                                                                                   
			oTable.getBinding("rows").sort(aTableSortState, "Application");                                                                                                                                                                                             
			// changes the noDataText of the list in case there are no filter results                                                                                                                                                                                   
			if (aTableSortState.length !== 0) {                                                                                                                                                                                                                         
				oViewModel.setProperty("/tableNoDataText", this.getResourceBundle().getText("worklistNoDataWithSearchText"));                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		OnUploadPress: function (e) {                                                                                                                                                                                                                                
			this._import(e.getParameter("files") && e.getParameter("files")[0]);                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_import: function (file) {                                                                                                                                                                                                                                   
			var that = this;                                                                                                                                                                                                                                            
			var excelData = {};                                                                                                                                                                                                                                         
			var totDeb = 0.00,                                                                                                                                                                                                                                          
				totCrd = 0.00;                                                                                                                                                                                                                                             
			documentNo = undefined;                                                                                                                                                                                                                                     
			compCode = undefined;                                                                                                                                                                                                                                       
			fYear = undefined;                                                                                                                                                                                                                                          
			errLog = undefined;                                                                                                                                                                                                                                         
			if (file && window.FileReader) {                                                                                                                                                                                                                            
				var reader = new FileReader();                                                                                                                                                                                                                             
				reader.onload = function (evn) {                                                                                                                                                                                                                           
					var data = evn.target.result;                                                                                                                                                                                                                             
					var workbook = XLSX.read(data, {                                                                                                                                                                                                                          
						type: 'binary'                                                                                                                                                                                                                                           
					});                                                                                                                                                                                                                                                       
					/*	workbook.SheetNames.forEach(function (sheetName) {                                                                                                                                                                                                     
							// Here is your object for every sheet in workbook                                                                                                                                                                                                      
							debugger;                                                                                                                                                                                                                                               
							excelData = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);                                                                                                                                                                           
						});*/                                                                                                                                                                                                                                                    
					debugger;                                                                                                                                                                                                                                                 
					excelData = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[workbook.SheetNames[0]]);                                                                                                                                                                
					excelData.shift();                                                                                                                                                                                                                                        
					                                                                                                                                                                                                                                                          
					var date_regex = /^[0-9]{4}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])$/;                                                                                                                                                                               
					var num_regex= /^[+-]?(\d+(\.\d+)?)$/;                                                                                                                                                                                                                    
					                                                                                                                                                                                                                                                          
					for (var i in excelData) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
						if (excelData[i]['ZFBDT']) {                                                                                                                                                                                                                             
							if (!(date_regex.test(excelData[i]['ZFBDT']))) {                                                                                                                                                                                                        
								excelData[i]['status'] = 'Error';                                                                                                                                                                                                                      
								excelData[i]['bddstatus'] = 'Error';                                                                                                                                                                                                                   
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						if (excelData[i]['VALUT']) {                                                                                                                                                                                                                             
							if (!(date_regex.test(excelData[i]['VALUT']))) {                                                                                                                                                                                                        
								excelData[i]['status'] = 'Error';                                                                                                                                                                                                                      
								excelData[i]['vldstatus'] = 'Error';                                                                                                                                                                                                                   
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						if (excelData[i]['DMBTR']){                                                                                                                                                                                                                              
							if (!(num_regex.test(excelData[i]['DMBTR']))) {                                                                                                                                                                                                         
								excelData[i]['status'] = 'Error';                                                                                                                                                                                                                      
								excelData[i]['amtstatus'] = 'Error';                                                                                                                                                                                                                   
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
						/*	else {                                                                                                                                                                                                                                                
								sap.m.MessageBox.error("Required field missing: S.no Number*");                                                                                                                                                                                        
							}*/                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
						if (excelData[i]['DMBTR'] < 0) {                                                                                                                                                                                                                         
							totDeb += (parseFloat(excelData[i]['DMBTR']) * -1);                                                                                                                                                                                                     
						} else {                                                                                                                                                                                                                                                 
							totCrd += parseFloat(excelData[i]['DMBTR']);                                                                                                                                                                                                            
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
					// Setting the data to the local model&nbsp;                                                                                                                                                                                                              
					that.localModel.setData({                                                                                                                                                                                                                                 
						items: excelData,                                                                                                                                                                                                                                        
						TOTDEB: totDeb,                                                                                                                                                                                                                                          
						TOTCRD: totCrd                                                                                                                                                                                                                                           
					});                                                                                                                                                                                                                                                       
					that.localModel.refresh(true);                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
					if (excelData.length > 6) {                                                                                                                                                                                                                               
						//var firstRow = that.getView().byId("table").getFirstVisibleRow();                                                                                                                                                                                      
						//var lastRow = firstRow + 6;                                                                                                                                                                                                                            
						//that.getView().byId("subCount").setText(firstRow + " - " + lastRow);                                                                                                                                                                                   
						that.getView().byId("table").setFirstVisibleRow(0);                                                                                                                                                                                                      
						that.getView().byId("subCount").setText("0 - 6");                                                                                                                                                                                                        
						that.getView().byId("begening").setEnabled(true);                                                                                                                                                                                                        
						that.getView().byId("previous").setEnabled(true);                                                                                                                                                                                                        
						that.getView().byId("next").setEnabled(true);                                                                                                                                                                                                            
						that.getView().byId("end").setEnabled(true);                                                                                                                                                                                                             
					}                                                                                                                                                                                                                                                         
					                                                                                                                                                                                                                                                          
				};                                                                                                                                                                                                                                                         
				reader.onerror = function (ex) {                                                                                                                                                                                                                           
					//console.log(ex);                                                                                                                                                                                                                                        
				};                                                                                                                                                                                                                                                         
				reader.readAsBinaryString(file);                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onPostPress: function (param) {                                                                                                                                                                                                                              
			var excelData = {};                                                                                                                                                                                                                                         
			var json = {};                                                                                                                                                                                                                                              
			var jsonUpdated = [];                                                                                                                                                                                                                                       
			var arr;                                                                                                                                                                                                                                                    
			startTime = new Date();                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			excelData = this.localModel.getData();                                                                                                                                                                                                                      
			json = excelData;                                                                                                                                                                                                                                           
			//json.forEach( obj => this._renameKey(obj, 'BUKRS', 'CompCode'); );                                                                                                                                                                                        
			for (var obj in json.items) {                                                                                                                                                                                                                               
				//this._renameKey(json.items[obj], 'BUKRS', 'CompCode');                                                                                                                                                                                                   
				//this._renameKey(json.items[obj], 'BLART', 'DocType');                                                                                                                                                                                                    
				var line = {};                                                                                                                                                                                                                                             
				if (json.items[obj]['SNO']) {                                                                                                                                                                                                                              
					line['SlNo'] = String(json.items[obj]['SNO']); //"0001";                                                                                                                                                                                                  
				} else {                                                                                                                                                                                                                                                   
					line['SlNo'] = "0001";                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['BKTXT']) {                                                                                                                                                                                                                            
					line['HeaderTxt'] = String(json.items[obj]['BKTXT']);                                                                                                                                                                                                     
				} else {                                                                                                                                                                                                                                                   
					line['HeaderTxt'] = "";                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['BUKRS']) {                                                                                                                                                                                                                            
					line['CompCode'] = String(json.items[obj]['BUKRS']);                                                                                                                                                                                                      
				} else {                                                                                                                                                                                                                                                   
					line['CompCode'] = "";                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['BLDAT']) {                                                                                                                                                                                                                            
					line['DocDate'] = "\/Date(" + Date.parse(json.items[obj]['BLDAT'] + " 00:00:00 GMT") + ")\/";                                                                                                                                                             
				} else {                                                                                                                                                                                                                                                   
					//line['DocDate'] = "";                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['BUDAT']) {                                                                                                                                                                                                                            
					line['PstngDate'] = "\/Date(" + Date.parse(json.items[obj]['BUDAT'] + " 00:00:00 GMT") + ")\/";                                                                                                                                                           
				} else {                                                                                                                                                                                                                                                   
					//line['PstngDate'] = "";                                                                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['WWERT']) {                                                                                                                                                                                                                            
					line['TransDate'] = "\/Date(" + Date.parse(json.items[obj]['WWERT'] + " 00:00:00 GMT") + ")\/"; //json.items[obj]['WWERT'];                                                                                                                               
				} else {                                                                                                                                                                                                                                                   
					//line['TransDate'] = "";                                                                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['MONAT']) {                                                                                                                                                                                                                            
					line['FisPeriod'] = String(json.items[obj]['MONAT']);                                                                                                                                                                                                     
				} else {                                                                                                                                                                                                                                                   
					line['FisPeriod'] = "00";                                                                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['BLART']) {                                                                                                                                                                                                                            
					line['DocType'] = String(json.items[obj]['BLART']);                                                                                                                                                                                                       
				} else {                                                                                                                                                                                                                                                   
					line['DocType'] = "";                                                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['XBLNR']) {                                                                                                                                                                                                                            
					line['RefDocNo'] = String(json.items[obj]['XBLNR']);                                                                                                                                                                                                      
				} else {                                                                                                                                                                                                                                                   
					line['RefDocNo'] = "";                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				line['ItemnoAcc'] = "0000000000";                                                                                                                                                                                                                          
				if (json.items[obj]['HKONT']) {                                                                                                                                                                                                                            
					line['GlAccount'] = String(json.items[obj]['HKONT']);                                                                                                                                                                                                     
				} else {                                                                                                                                                                                                                                                   
					line['GlAccount'] = "";                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['SGTXT']) {                                                                                                                                                                                                                            
					line['ItemText'] = String(json.items[obj]['SGTXT']);                                                                                                                                                                                                      
				} else {                                                                                                                                                                                                                                                   
					line['ItemText'] = "";                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['PRCTR']) {                                                                                                                                                                                                                            
					line['ProfitCtr'] = String(json.items[obj]['PRCTR']);                                                                                                                                                                                                     
				} else {                                                                                                                                                                                                                                                   
					line['ProfitCtr'] = "";                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				line['Segment'] = "";                                                                                                                                                                                                                                      
				if (json.items[obj]['KOSTL']) {                                                                                                                                                                                                                            
					line['Costcenter'] = String(json.items[obj]['KOSTL']);                                                                                                                                                                                                    
				} else {                                                                                                                                                                                                                                                   
					line['Costcenter'] = "";                                                                                                                                                                                                                                  
				}                                                                                                                                                                                                                                                          
				line['AllocNmbr'] = "";                                                                                                                                                                                                                                    
				if (json.items[obj]['MWSKZ']) {                                                                                                                                                                                                                            
					line['TaxCode'] = String(json.items[obj]['MWSKZ']);                                                                                                                                                                                                       
				} else {                                                                                                                                                                                                                                                   
					line['TaxCode'] = "";                                                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['TXJCD']) {                                                                                                                                                                                                                            
					line['Taxjurcode'] = String(json.items[obj]['TXJCD']);                                                                                                                                                                                                    
				} else {                                                                                                                                                                                                                                                   
					line['Taxjurcode'] = "";                                                                                                                                                                                                                                  
				}                                                                                                                                                                                                                                                          
				line['CsTransT'] = "";                                                                                                                                                                                                                                     
				line['ItemnoTax'] = "000000";                                                                                                                                                                                                                              
				line['Orderid'] = "";                                                                                                                                                                                                                                      
				if (json.items[obj]['PS_POSID']) {                                                                                                                                                                                                                         
					line['WbsElement'] = String(json.items[obj]['PS_POSID']);                                                                                                                                                                                                 
				} else {                                                                                                                                                                                                                                                   
					line['WbsElement'] = "";                                                                                                                                                                                                                                  
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['VALUT']) {                                                                                                                                                                                                                            
					line['ValueDate'] = "\/Date(" + Date.parse(json.items[obj]['VALUT'] + " 00:00:00 GMT") + ")\/"; //json.items[obj]['VALUT'];                                                                                                                               
				} else {                                                                                                                                                                                                                                                   
					//line['ValueDate'] = "";                                                                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['HBKID']) {                                                                                                                                                                                                                            
					line['Housebankid'] = String(json.items[obj]['HBKID']);                                                                                                                                                                                                   
				} else {                                                                                                                                                                                                                                                   
					line['Housebankid'] = "";                                                                                                                                                                                                                                 
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['HKTID']) {                                                                                                                                                                                                                            
					line['Housebankacctid'] = String(json.items[obj]['HKTID']);                                                                                                                                                                                               
				} else {                                                                                                                                                                                                                                                   
					line['Housebankacctid'] = "";                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['FIPEX']) {                                                                                                                                                                                                                            
					line['CmmtItemLong'] = String(json.items[obj]['FIPEX']);                                                                                                                                                                                                  
				} else {                                                                                                                                                                                                                                                   
					line['CmmtItemLong'] = "";                                                                                                                                                                                                                                
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['WAERS']) {                                                                                                                                                                                                                            
					line['Currency'] = String(json.items[obj]['WAERS']);                                                                                                                                                                                                      
				} else {                                                                                                                                                                                                                                                   
					line['Currency'] = "";                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['DMBTR']) {                                                                                                                                                                                                                            
					line['AmtDoccur'] = String(json.items[obj]['DMBTR']);                                                                                                                                                                                                     
				} else {                                                                                                                                                                                                                                                   
					line['AmtDoccur'] = "0.0000";                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				line['TestRun'] = "";                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				if (json.items[obj]['KUNNR']) {                                                                                                                                                                                                                            
					line['KUNNR'] = String(json.items[obj]['KUNNR']);                                                                                                                                                                                                         
				} else {                                                                                                                                                                                                                                                   
					line['KUNNR'] = "";                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['LIFNR']) {                                                                                                                                                                                                                            
					line['LIFNR'] = String(json.items[obj]['LIFNR']);                                                                                                                                                                                                         
				} else {                                                                                                                                                                                                                                                   
					line['LIFNR'] = "";                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['VBUND']) {                                                                                                                                                                                                                            
					line['VBUND'] = String(json.items[obj]['VBUND']);                                                                                                                                                                                                         
				} else {                                                                                                                                                                                                                                                   
					line['VBUND'] = "";                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['ITM_BUKRS']) {                                                                                                                                                                                                                        
					line['ITM_BUKRS'] = String(json.items[obj]['ITM_BUKRS']);                                                                                                                                                                                                 
				} else {                                                                                                                                                                                                                                                   
					line['ITM_BUKRS'] = "";                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['ZTERM']) {                                                                                                                                                                                                                            
					line['ZTERM'] = String(json.items[obj]['ZTERM']);                                                                                                                                                                                                         
				} else {                                                                                                                                                                                                                                                   
					line['ZTERM'] = "";                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
				if (json.items[obj]['ZLSCH']) {                                                                                                                                                                                                                            
					line['ZLSCH'] = String(json.items[obj]['ZLSCH']);                                                                                                                                                                                                         
				} else {                                                                                                                                                                                                                                                   
					line['ZLSCH'] = "";                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
				jsonUpdated.push(line);                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var json2 = {};                                                                                                                                                                                                                                             
			//json2['SlNo'] = jsonUpdated[0]['SlNo'];                                                                                                                                                                                                                   
			json2.SlNo = jsonUpdated[0]['SlNo'];                                                                                                                                                                                                                        
			json2['CompCode'] = jsonUpdated[0]['CompCode'];                                                                                                                                                                                                             
			json2['DocType'] = jsonUpdated[0]['DocType'];                                                                                                                                                                                                               
			json2['Action'] = param;                                                                                                                                                                                                                                    
			json2['Document'] = "";                                                                                                                                                                                                                                     
			json2['Year'] = "0000";                                                                                                                                                                                                                                     
			json2['Remarks'] = "";                                                                                                                                                                                                                                      
			json2['JEHDRTOITEM'] = jsonUpdated;                                                                                                                                                                                                                         
			debugger;                                                                                                                                                                                                                                                   
			this.createModel = new JSONModel(json2);                                                                                                                                                                                                                    
			this.getView().setModel(this.createModel, "createCollection");                                                                                                                                                                                              
			var oSOData = this.getView().getModel("createCollection").getData();                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			var oModel = this.getOwnerComponent().getModel();                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var mParameters = {                                                                                                                                                                                                                                         
				success: this._handleCreateSuccess,                                                                                                                                                                                                                        
				error: this._handleCreateError                                                                                                                                                                                                                             
			};                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			oModel.create("/JEHEADERSet", oSOData, mParameters);                                                                                                                                                                                                        
			sap.ui.core.BusyIndicator.show();                                                                                                                                                                                                                           
			debugger;                                                                                                                                                                                                                                                   
			var oData = this.localModel.getData();                                                                                                                                                                                                                      
			oData.Document = window.documentNo;                                                                                                                                                                                                                         
			this.localModel.setData(oData);                                                                                                                                                                                                                             
			jsonUpdated = JSON.stringify(arr);                                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_renameKey: function (obj, oldKey, newKey) {                                                                                                                                                                                                                 
			obj[newKey] = obj[oldKey];                                                                                                                                                                                                                                  
			delete obj[oldKey];                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_handleCreateSuccess: function (oData, response) {                                                                                                                                                                                                           
			debugger;                                                                                                                                                                                                                                                   
		//	var endTime = new Date();                                                                                                                                                                                                                                 
		//	respTime = (endTime - startTime) / 1000;                                                                                                                                                                                                                  
			sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                           
			var message = "";                                                                                                                                                                                                                                           
			if (oData.Document) {                                                                                                                                                                                                                                       
				message = oData.Remarks + "\nDocument Number: " + oData.Document + "\nCompany Code: " + oData.CompCode + "\nFiscal Year: " + oData                                                                                                                         
					.Year; // + "\nResponse Time: " + respTime + " Sec";                                                                                                                                                                                                      
				var oModel = new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/ZJE_UPLOAD_03_SRV", {                                                                                                                                                                
					json: true,                                                                                                                                                                                                                                               
					loadMetadataAsync: true                                                                                                                                                                                                                                   
				});                                                                                                                                                                                                                                                        
				var tcode = "";                                                                                                                                                                                                                                            
				if (response.data.Action == 'PARK')                                                                                                                                                                                                                        
					tcode = "FBV0";                                                                                                                                                                                                                                           
				else if (response.data.Action == 'POST')                                                                                                                                                                                                                   
					tcode = "FB03";                                                                                                                                                                                                                                           
				var tcodeUrl = "/JETCODESet(TCODE='" + tcode + "',BELNR='" + oData.Document + "',BUKRS='" + oData.CompCode + "',GJAHR='" +                                                                                                                                 
					oData.Year +                                                                                                                                                                                                                                              
					"')";                                                                                                                                                                                                                                                     
				sap.m.MessageBox.success(message, {                                                                                                                                                                                                                        
					actions: ["View Document", sap.m.MessageBox.Action.CLOSE],                                                                                                                                                                                                
					emphasizedAction: "View Document",                                                                                                                                                                                                                        
					onClose: function (sAction) {                                                                                                                                                                                                                             
						//MessageToast.show("Action selected: " + sAction);                                                                                                                                                                                                      
						debugger;                                                                                                                                                                                                                                                
						if (sAction == "View Document") {                                                                                                                                                                                                                        
							oModel.read(tcodeUrl, {                                                                                                                                                                                                                                 
								success: function (res) {                                                                                                                                                                                                                              
									debugger;                                                                                                                                                                                                                                             
									if (res)                                                                                                                                                                                                                                              
										window.open(res.Linkref1);                                                                                                                                                                                                                           
								},                                                                                                                                                                                                                                                     
								error: function (e) {                                                                                                                                                                                                                                  
									if (e)                                                                                                                                                                                                                                                
										sap.m.MessageToast.show("Error while redirecting document");                                                                                                                                                                                         
								}                                                                                                                                                                                                                                                      
							});                                                                                                                                                                                                                                                     
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
				message = oData.Remarks; //+ "\nResponse Time: " + respTime + " Sec";                                                                                                                                                                                      
				sap.m.MessageBox.success(message);                                                                                                                                                                                                                         
			}                                                                                                                                                                                                                                                           
			documentNo = oData.Document;                                                                                                                                                                                                                                
			fYear = oData.Year;                                                                                                                                                                                                                                         
			compCode = oData.CompCode;                                                                                                                                                                                                                                  
			//location.reload();                                                                                                                                                                                                                                        
			//By calling refreshBinding function directly .                                                                                                                                                                                                             
			//var loData = this.localModel.getData();                                                                                                                                                                                                                   
			//loData.Document = oData.Document;                                                                                                                                                                                                                         
			//this.localModel.setData(loData);                                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_handleCreateError: function (oError) {                                                                                                                                                                                                                      
			debugger;                                                                                                                                                                                                                                                   
			var endTime = new Date();                                                                                                                                                                                                                                   
			respTime = (endTime - startTime) / 1000;                                                                                                                                                                                                                    
			if (oError) {                                                                                                                                                                                                                                               
				sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                          
				if (oError.responseText) {                                                                                                                                                                                                                                 
					var oErrorMessage = JSON.parse(oError.responseText);                                                                                                                                                                                                      
					var errorDetails = oErrorMessage.error.innererror.errordetails;                                                                                                                                                                                           
					errLog = errorDetails;                                                                                                                                                                                                                                    
					var message = "";                                                                                                                                                                                                                                         
					/*	var errors = "";                                                                                                                                                                                                                                       
						for(var line in errorDetails){                                                                                                                                                                                                                           
							errors += errorDetails[line].code +" "+ errorDetails[line].message + "\n";                                                                                                                                                                              
						}                                                                                                                                                                                                                                                        
						this.handleDialogPress();                                                                                                                                                                                                                                
						sap.m.MessageBox.alert("Order was not created due to: " +                                                                                                                                                                                                
							oErrorMessage.error.message.value + errors); */                                                                                                                                                                                                         
					if (errorDetails.length > 0) {                                                                                                                                                                                                                            
						message = oErrorMessage.error.message.value +                                                                                                                                                                                                            
							"\n Please check Errorlog for more information";                                                                                                                                                                                                        
						sap.m.MessageBox.error(message, {                                                                                                                                                                                                                        
							actions: ["View Error Log", sap.m.MessageBox.Action.CLOSE],                                                                                                                                                                                             
							emphasizedAction: "View Error Log",                                                                                                                                                                                                                     
							onClose: function (sAction) {                                                                                                                                                                                                                           
								debugger;                                                                                                                                                                                                                                              
								//MessageToast.show("Action selected: " + sAction);                                                                                                                                                                                                    
								if (sAction == "View Error Log") {                                                                                                                                                                                                                     
									var oMessageTemplate = new sap.m.MessageItem({                                                                                                                                                                                                        
										type: '{type}',                                                                                                                                                                                                                                      
										title: '{title}',                                                                                                                                                                                                                                    
										description: '{description}',                                                                                                                                                                                                                        
										subtitle: '{subtitle}',                                                                                                                                                                                                                              
										counter: '{counter}',                                                                                                                                                                                                                                
										markupDescription: '{markupDescription}'                                                                                                                                                                                                             
											//link: oLink                                                                                                                                                                                                                                       
									});                                                                                                                                                                                                                                                   
									var logModel = new JSONModel();                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
									var oMessageView = new sap.m.MessageView({                                                                                                                                                                                                            
										showDetailsPageHeader: false,                                                                                                                                                                                                                        
										itemSelect: false,                                                                                                                                                                                                                                   
										items: {                                                                                                                                                                                                                                             
											path: "/",                                                                                                                                                                                                                                          
											template: oMessageTemplate                                                                                                                                                                                                                          
										}                                                                                                                                                                                                                                                    
									});                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
									if (errLog) {                                                                                                                                                                                                                                         
										var tmp = errLog;                                                                                                                                                                                                                                    
										var messages = [];                                                                                                                                                                                                                                   
										for (var item in tmp) {                                                                                                                                                                                                                              
											var line = {};                                                                                                                                                                                                                                      
											if (tmp[item]['message'].length > 0) {                                                                                                                                                                                                              
												if (tmp[item]['severity'] == 'error') {                                                                                                                                                                                                            
													line['type'] = 'Error'; //'Warning','Success','Information'                                                                                                                                                                                       
												}                                                                                                                                                                                                                                                  
												line['title'] = tmp[item]['message'];                                                                                                                                                                                                              
												line['subtitle'] = tmp[item]['code'];                                                                                                                                                                                                              
												line['description'] = ' ';                                                                                                                                                                                                                         
												messages.push(line);                                                                                                                                                                                                                               
											}                                                                                                                                                                                                                                                   
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
									}                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
									logModel.setData(messages);                                                                                                                                                                                                                           
									oMessageView.setModel(logModel);                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
									var oDialog = new sap.m.Dialog({                                                                                                                                                                                                                      
										resizable: true,                                                                                                                                                                                                                                     
										content: oMessageView,                                                                                                                                                                                                                               
										state: 'Error',                                                                                                                                                                                                                                      
										beginButton: new Button({                                                                                                                                                                                                                            
											press: function () {                                                                                                                                                                                                                                
												this.getParent().close();                                                                                                                                                                                                                          
											},                                                                                                                                                                                                                                                  
											text: "Close"                                                                                                                                                                                                                                       
										}),                                                                                                                                                                                                                                                  
										customHeader: new Bar({                                                                                                                                                                                                                              
											//contentLeft: [oBackButton],                                                                                                                                                                                                                       
											contentMiddle: [                                                                                                                                                                                                                                    
												new Title({                                                                                                                                                                                                                                        
													text: "Error Log"                                                                                                                                                                                                                                 
												})                                                                                                                                                                                                                                                 
											]                                                                                                                                                                                                                                                   
										}),                                                                                                                                                                                                                                                  
										contentHeight: "50%",                                                                                                                                                                                                                                
										contentWidth: "50%",                                                                                                                                                                                                                                 
										verticalScrolling: false                                                                                                                                                                                                                             
									});                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
									//oMessageView.navigateBack();                                                                                                                                                                                                                        
									oDialog.open();                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
					} else {                                                                                                                                                                                                                                                  
						message = oErrorMessage.error.message.value;                                                                                                                                                                                                             
						sap.m.MessageBox.error(message);                                                                                                                                                                                                                         
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		handleDialogPress: function () {                                                                                                                                                                                                                             
			debugger;                                                                                                                                                                                                                                                   
			this.oMessageView.setModel(this.localModel.errorDetails);                                                                                                                                                                                                   
			this.oMessageView.navigateBack();                                                                                                                                                                                                                           
			this.oDialog.open();                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onLogPress: function () {                                                                                                                                                                                                                                    
			debugger;                                                                                                                                                                                                                                                   
			if (errLog) {                                                                                                                                                                                                                                               
				var tmp = errLog;                                                                                                                                                                                                                                          
				var messages = [];                                                                                                                                                                                                                                         
				for (var item in tmp) {                                                                                                                                                                                                                                    
					var line = {};                                                                                                                                                                                                                                            
					if (tmp[item]['message'].length > 0) {                                                                                                                                                                                                                    
						if (tmp[item]['severity'] == 'error') {                                                                                                                                                                                                                  
							line['type'] = 'Error'; //'Warning','Success','Information'                                                                                                                                                                                             
						}                                                                                                                                                                                                                                                        
						line['title'] = tmp[item]['message'];                                                                                                                                                                                                                    
						line['subtitle'] = tmp[item]['code'];                                                                                                                                                                                                                    
						line['description'] = ' ';                                                                                                                                                                                                                               
						messages.push(line);                                                                                                                                                                                                                                     
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				this.logModel.setData(messages);                                                                                                                                                                                                                           
				this.oMessageView.setModel(this.logModel);                                                                                                                                                                                                                 
				this.oMessageView.navigateBack();                                                                                                                                                                                                                          
				this.oDialog.open();                                                                                                                                                                                                                                       
			} else {                                                                                                                                                                                                                                                    
				sap.m.MessageToast.show("No Logs Available");                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onShowDoc: function () {                                                                                                                                                                                                                                     
			debugger;                                                                                                                                                                                                                                                   
			if (documentNo) {                                                                                                                                                                                                                                           
				var docmessage = "Document Number: " + documentNo + "\nCompany Code: " + compCode + "\nFiscal Year: " + fYear;                                                                                                                                             
				var oModel = this.getOwnerComponent().getModel();                                                                                                                                                                                                          
				if (!documentNo)                                                                                                                                                                                                                                           
					documentNo = '';                                                                                                                                                                                                                                          
				if (!compCode)                                                                                                                                                                                                                                             
					compCode = '';                                                                                                                                                                                                                                            
				if (!fYear)                                                                                                                                                                                                                                                
					fYear = '';                                                                                                                                                                                                                                               
				var transaction = '';                                                                                                                                                                                                                                      
				var creModelData = this.createModel.getData();                                                                                                                                                                                                             
				if (creModelData.Action == "PARK")                                                                                                                                                                                                                         
					transaction = 'FBV0';                                                                                                                                                                                                                                     
				else if (creModelData.Action == "POST")                                                                                                                                                                                                                    
					transaction = 'FB03';                                                                                                                                                                                                                                     
				var mParameters = {                                                                                                                                                                                                                                        
					success: this._handleUrlSuccess,                                                                                                                                                                                                                          
					error: this._handleUrlError                                                                                                                                                                                                                               
				};                                                                                                                                                                                                                                                         
				var tcodeUrl = "/JETCODESet(TCODE='" + transaction + "',BELNR='" + documentNo + "',BUKRS='" + compCode + "',GJAHR='" + fYear +                                                                                                                             
					"')";                                                                                                                                                                                                                                                     
				debugger;                                                                                                                                                                                                                                                  
				sap.m.MessageBox.information(docmessage, {                                                                                                                                                                                                                 
					title: "Document Information",                                                                                                                                                                                                                            
					actions: ["View Document", sap.m.MessageBox.Action.CLOSE],                                                                                                                                                                                                
					emphasizedAction: "View Document",                                                                                                                                                                                                                        
					onClose: function (sAction) {                                                                                                                                                                                                                             
						//MessageToast.show("Action selected: " + sAction);                                                                                                                                                                                                      
						debugger;                                                                                                                                                                                                                                                
						if (sAction == "View Document")                                                                                                                                                                                                                          
							oModel.read(tcodeUrl, mParameters);                                                                                                                                                                                                                     
						//this._navToTransaction("FB03");                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
				sap.m.MessageToast.show("No Document Info Available");                                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onDownTemplate: function () {                                                                                                                                                                                                                                
			debugger;                                                                                                                                                                                                                                                   
			var exlData = [{                                                                                                                                                                                                                                            
				"SNO": "S.no Number*",                                                                                                                                                                                                                                     
				"BUKRS": "Company Code* BUKRS",                                                                                                                                                                                                                            
				"BLART": "Document Type*  BLART",                                                                                                                                                                                                                          
				"BLDAT": "Document Date* BLDAT",                                                                                                                                                                                                                           
				"BUDAT": "Posting date*  BUDAT",                                                                                                                                                                                                                           
				"MONAT": "Fiscal Period MONAT",                                                                                                                                                                                                                            
				"WAERS": "Currency*  WAERS",                                                                                                                                                                                                                               
				"XBLNR": "Reference*    XBLNR",                                                                                                                                                                                                                            
				"BKTXT": "Header Text*             BKTXT",                                                                                                                                                                                                                 
				"LDGRP": "Ledger Group            LDGRP",                                                                                                                                                                                                                  
				"KURSF_EXT": "Exchange Rate     KURSF_EXT",                                                                                                                                                                                                                
				"WWERT": "Currency Transalation date*  WWERT",                                                                                                                                                                                                             
				"PARGB_HDR": "Partner Business Area  PARGB_HDR",                                                                                                                                                                                                           
				"HKONT": "GL Account#* HKONT",                                                                                                                                                                                                                             
				"KUNNR": "Customer",                                                                                                                                                                                                                                       
				"LIFNR": "Vendor",                                                                                                                                                                                                                                         
				"DMBTR": "Amount in company code currency*  DMBTR",                                                                                                                                                                                                        
				"DMBE2": "Amount in second local currency      DMBE2",                                                                                                                                                                                                     
				"ZTERM": "Payment Terms     ZTERM",                                                                                                                                                                                                                        
				"ZSCHL": "Payment Method   ZSCHL",                                                                                                                                                                                                                         
				"ZFBDT": "Base line Due date      ZFBDT",                                                                                                                                                                                                                  
				"ZUONR": "Assignment   ZUONR",                                                                                                                                                                                                                             
				"SGTXT": "Item text*                                                         SGTXT ",                                                                                                                                                                      
				"PRCTR": "Profit Center*    PRCTR",                                                                                                                                                                                                                        
				"SEGMENT": "Segment   SEGMENT",                                                                                                                                                                                                                            
				"KOSTL": "Cost Center     KOSTL",                                                                                                                                                                                                                          
				"MWSKZ": "tax code**   MWSKZ",                                                                                                                                                                                                                             
				"TXJCD": "Tax ax Jurisdiction**   TXJCD",                                                                                                                                                                                                                  
				"ZUFNR": "Order number    ZUFNR",                                                                                                                                                                                                                          
				"PS_POSID": "WBS Element      PS_POSID",                                                                                                                                                                                                                   
				"VALUT": "Value Date            VALUT",                                                                                                                                                                                                                    
				"HBKID": "House Bank           HBKID",                                                                                                                                                                                                                     
				"HKTID": "House Bank Account     HKTID",                                                                                                                                                                                                                   
				"VUBND": "Trading Partner       VUBND",                                                                                                                                                                                                                    
				"ITM_BUKRS": "Trading Partner Company code",                                                                                                                                                                                                               
				"FIPEX": "Commetment Item       FIPEX",                                                                                                                                                                                                                    
				"RMVCT": "Transaction Type     RMVCT",                                                                                                                                                                                                                     
				"SP_GL_IND": "Special GL Indicator   SP_GL_IND"                                                                                                                                                                                                            
			}];                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			var exlInstr = [{                                                                                                                                                                                                                                           
				"S.no Number*": "1. This template can be used for  below scenarios:\na) AR Customer Invoice including intercompany. Document Type \"DR\".\nb) AR Cutomer Debit Memo including Intercompany. Document Type \"DZ\"\nc) AR one-time customer Invoices. In thi+
s template fields highlighted                                                                            2.Fields which are mentioned with * are mandatory fields.                                                                                            +
                 3. Fields wich are colored with gray color are one time customer fields"                                                                                                                                                                      
			}];                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			//var exlModel = new JSONModel(exlData);                                                                                                                                                                                                                    
			var workSheet = XLSX.utils.json_to_sheet(exlData);                                                                                                                                                                                                          
			var workSheet2 = XLSX.utils.json_to_sheet(exlInstr);                                                                                                                                                                                                        
			var workBook = XLSX.utils.book_new();                                                                                                                                                                                                                       
			XLSX.utils.book_append_sheet(workBook, workSheet, "AR Invoice Invoice Template");                                                                                                                                                                           
			XLSX.utils.book_append_sheet(workBook, workSheet2, "Template Document");                                                                                                                                                                                    
			var dFile = "template.xlsx";                                                                                                                                                                                                                                
			XLSX.writeFile(workBook, dFile);                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_setInitialData: function () {                                                                                                                                                                                                                               
			this._initP13nData();                                                                                                                                                                                                                                       
			var oView = this.getView();                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			var oSelectionPanel = oView.byId("columnsPanel");                                                                                                                                                                                                           
			var oSortPanel = oView.byId("sortPanel");                                                                                                                                                                                                                   
			//var oGroupPanel = oView.byId("groupPanel");                                                                                                                                                                                                               
			//var oFilterPanel = oView.byId("filterPanel");                                                                                                                                                                                                             
			debugger;                                                                                                                                                                                                                                                   
			oSelectionPanel.setP13nData(this._initialData.columns);                                                                                                                                                                                                     
			oSortPanel.setP13nData(this._initialData.sort);                                                                                                                                                                                                             
			//oGroupPanel.setP13nData(this._initialData.group);                                                                                                                                                                                                         
			//oFilterPanel.setP13nData(this._initialData.filter);                                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onContainerOpen: function (oEvt) {                                                                                                                                                                                                                           
			var oView = this.getView();                                                                                                                                                                                                                                 
			var oPopup = oView.byId("p13nPopup");                                                                                                                                                                                                                       
			if (!this._bIsOpen) {                                                                                                                                                                                                                                       
				this._setInitialData();                                                                                                                                                                                                                                    
				this._bIsOpen = true;                                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			oPopup.open(oEvt.getSource());                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onClose: function (oEvt) {                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			if (oEvt.getParameter("reason") == "Ok") {                                                                                                                                                                                                                  
				var oP13nState = {                                                                                                                                                                                                                                         
					columns: this.getView().byId("columnsPanel").getP13nData(),                                                                                                                                                                                               
					sort: this.getView().byId("sortPanel").getP13nData()                                                                                                                                                                                                      
						//group: this.getView().byId("groupPanel").getP13nData()                                                                                                                                                                                                 
				};                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				//tabColumns = this.getView().byId("table").getColumns();                                                                                                                                                                                                  
				this.getView().byId("table").removeAllColumns();                                                                                                                                                                                                           
				for (var col in oP13nState.columns) {                                                                                                                                                                                                                      
					if (oP13nState.columns[col]["visible"] == true) {                                                                                                                                                                                                         
						for (var tcol in tabColumns) {                                                                                                                                                                                                                           
							var sid = "";                                                                                                                                                                                                                                           
							sid = "container-JOURNAL_UPLOAD---worklist--" + oP13nState.columns[col]["name"];                                                                                                                                                                        
							if (tabColumns[tcol]["sId"] == sid)                                                                                                                                                                                                                     
								this.getView().byId("table").insertColumn(tabColumns[tcol], col);                                                                                                                                                                                      
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				//flter details                                                                                                                                                                                                                                            
				var filterRes = this.filterModel.getData();                                                                                                                                                                                                                
				var filterTab = [];                                                                                                                                                                                                                                        
				for (var f in filterRes.items) {                                                                                                                                                                                                                           
					if (filterRes.items[f]["exclude"] == false) {                                                                                                                                                                                                             
						if (filterRes.items[f]["value2"])                                                                                                                                                                                                                        
							var line = new Filter(filterRes.items[f]["key"], filterRes.items[f]["operation"], filterRes.items[f]["value1"], filterRes                                                                                                                               
								.items[f]["value2"]);                                                                                                                                                                                                                                  
						else                                                                                                                                                                                                                                                     
							line = new Filter(filterRes.items[f]["key"], filterRes.items[f]["operation"], filterRes.items[f]["value1"]);                                                                                                                                            
					} else {                                                                                                                                                                                                                                                  
						line = new Filter(filterRes.items[f]["key"], "NE", filterRes.items[f]["value1"]);                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
					filterTab.push(line);                                                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
				this._applySearch(filterTab);                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				//Sort                                                                                                                                                                                                                                                     
				debugger;                                                                                                                                                                                                                                                  
				var sorterTab = [];                                                                                                                                                                                                                                        
				for (var sor in oP13nState.sort) {                                                                                                                                                                                                                         
					if (oP13nState.sort[sor]["sorted"] == true) {                                                                                                                                                                                                             
						var sortLine = new Sorter(oP13nState.sort[sor]["name"], oP13nState.sort[sor]["descending"], true);                                                                                                                                                       
						sorterTab.push(sortLine);                                                                                                                                                                                                                                
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				this._applySort(sorterTab);                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onFilterClose: function (oEvt) {                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			if (oEvt == "Ok") {                                                                                                                                                                                                                                         
				var oP13nState = {                                                                                                                                                                                                                                         
					columns: this.getView().byId("columnsPanel").getP13nData(),                                                                                                                                                                                               
					sort: this.getView().byId("sortPanel").getP13nData()                                                                                                                                                                                                      
						//group: this.getView().byId("groupPanel").getP13nData()                                                                                                                                                                                                 
				};                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				//tabColumns = this.getView().byId("table").getColumns();                                                                                                                                                                                                  
				this.getView().byId("table").removeAllColumns();                                                                                                                                                                                                           
				for (var col in oP13nState.columns) {                                                                                                                                                                                                                      
					if (oP13nState.columns[col]["visible"] == true) {                                                                                                                                                                                                         
						for (var tcol in tabColumns) {                                                                                                                                                                                                                           
							var sid = "";                                                                                                                                                                                                                                           
							sid = "container-JOURNAL_UPLOAD---worklist--" + oP13nState.columns[col]["name"];                                                                                                                                                                        
							if (tabColumns[tcol]["sId"] == sid)                                                                                                                                                                                                                     
								this.getView().byId("table").insertColumn(tabColumns[tcol], col);                                                                                                                                                                                      
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				//flter details                                                                                                                                                                                                                                            
				debugger;                                                                                                                                                                                                                                                  
				var filterRes = this.filterModel.getData();                                                                                                                                                                                                                
				var filterTab = [];                                                                                                                                                                                                                                        
				for (var f in filterRes.items) {                                                                                                                                                                                                                           
					if (filterRes.items[f]["exclude"] == false) {                                                                                                                                                                                                             
						if (filterRes.items[f]["value2"])                                                                                                                                                                                                                        
							var line = new Filter(filterRes.items[f]["key"], filterRes.items[f]["operation"], filterRes.items[f]["value1"], filterRes                                                                                                                               
								.items[f]["value2"]);                                                                                                                                                                                                                                  
						else                                                                                                                                                                                                                                                     
							line = new Filter(filterRes.items[f]["key"], filterRes.items[f]["operation"], filterRes.items[f]["value1"]);                                                                                                                                            
					} else {                                                                                                                                                                                                                                                  
						line = new Filter(filterRes.items[f]["key"], "NE", filterRes.items[f]["value1"]);                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
					filterTab.push(line);                                                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
				this._applySearch(filterTab);                                                                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		reset: function (oEvt) {                                                                                                                                                                                                                                     
			this._setInitialData();                                                                                                                                                                                                                                     
			this.getView().byId("filterPanel").updateBindings();                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onAddFilter: function (oSource) {                                                                                                                                                                                                                            
			debugger;                                                                                                                                                                                                                                                   
			if (oSource.getParameter("reason") == "added") {                                                                                                                                                                                                            
				var newFilter = oSource.getParameter("itemData");                                                                                                                                                                                                          
				var filters = this.filterModel.getData();                                                                                                                                                                                                                  
				for (var i in filters.keys) {                                                                                                                                                                                                                              
					if (filters.keys[i].key == newFilter.columnKey) {                                                                                                                                                                                                         
						newFilter.key = filters.keys[i].key;                                                                                                                                                                                                                     
						newFilter.columnKey = filters.keys[i].columnKey;                                                                                                                                                                                                         
						if (filters.keys[i].type == "date") {                                                                                                                                                                                                                    
							if (newFilter.value1 !== null)                                                                                                                                                                                                                          
								newFilter.value1 = this.convertDateFormat(newFilter.value1);                                                                                                                                                                                           
							if (newFilter.value2 !== null)                                                                                                                                                                                                                          
								newFilter.value2 = this.convertDateFormat(newFilter.value2);                                                                                                                                                                                           
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				filters.items.push(newFilter);                                                                                                                                                                                                                             
				this.filterModel.setData({                                                                                                                                                                                                                                 
					items: filters.items,                                                                                                                                                                                                                                     
					keys: filters.keys                                                                                                                                                                                                                                        
				});                                                                                                                                                                                                                                                        
			} else if (oSource.getParameter("reason") == "removed") {                                                                                                                                                                                                   
				filters = this.filterModel.getData();                                                                                                                                                                                                                      
				//delete filters.items[oSource.getParameter("index")];                                                                                                                                                                                                     
				filters.items.splice(oSource.getParameter("index"), 1);                                                                                                                                                                                                    
				this.filterModel.setData({                                                                                                                                                                                                                                 
					items: filters.items,                                                                                                                                                                                                                                     
					keys: filters.keys                                                                                                                                                                                                                                        
				});                                                                                                                                                                                                                                                        
			} else if (oSource.getParameter("reason") == "updated") {                                                                                                                                                                                                   
				var updFilter = oSource.getParameter("itemData");                                                                                                                                                                                                          
				filters = this.filterModel.getData();                                                                                                                                                                                                                      
				for (var it in filters.keys) {                                                                                                                                                                                                                             
					if (filters.keys[it].key == updFilter.columnKey) {                                                                                                                                                                                                        
						updFilter.key = filters.keys[it].key;                                                                                                                                                                                                                    
						updFilter.columnKey = filters.keys[it].columnKey;                                                                                                                                                                                                        
						if (filters.keys[it].type == "date") {                                                                                                                                                                                                                   
							if (updFilter.value1 !== null)                                                                                                                                                                                                                          
								updFilter.value1 = this.convertDateFormat(newFilter.value1);                                                                                                                                                                                           
							if (updFilter.value2 !== null)                                                                                                                                                                                                                          
								updFilter.value2 = this.convertDateFormat(newFilter.value2);                                                                                                                                                                                           
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				filters.items[oSource.getParameter("index")] = updFilter;                                                                                                                                                                                                  
				this.filterModel.setData({                                                                                                                                                                                                                                 
					items: filters.items,                                                                                                                                                                                                                                     
					keys: filters.keys                                                                                                                                                                                                                                        
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
			debugger;                                                                                                                                                                                                                                                   
			this.onFilterClose("Ok");                                                                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		convertDateFormat: function (str) {                                                                                                                                                                                                                          
			var date = new Date(str),                                                                                                                                                                                                                                   
				mnth = ("0" + (date.getMonth() + 1)).slice(-2),                                                                                                                                                                                                            
				day = ("0" + date.getDate()).slice(-2);                                                                                                                                                                                                                    
			return [date.getFullYear(), mnth, day].join("/");                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onFs: function () {                                                                                                                                                                                                                                          
			if (this.getView().byId("fs").getIcon() == "sap-icon://full-screen") {                                                                                                                                                                                      
				this.getView().byId("Report1").setVisible(false);                                                                                                                                                                                                          
				this.getView().byId("SimpleForm2").setVisible(false);                                                                                                                                                                                                      
				//this.getView().byId("header").setVisible(false);                                                                                                                                                                                                         
				this.getView().byId("fs").setIcon("sap-icon://exit-full-screen");                                                                                                                                                                                          
				this.getView().byId("fs").setTooltip("Exit Full Screen");                                                                                                                                                                                                  
				var rows = this.getView().byId("table").getVisibleRowCount();                                                                                                                                                                                              
				rows = rows + 2;                                                                                                                                                                                                                                           
				this.getView().byId("table").setVisibleRowCount(rows);                                                                                                                                                                                                     
			} else {                                                                                                                                                                                                                                                    
				this.getView().byId("Report1").setVisible(true);                                                                                                                                                                                                           
				this.getView().byId("SimpleForm2").setVisible(true);                                                                                                                                                                                                       
				//this.getView().byId("header").setVisible(true);                                                                                                                                                                                                          
				this.getView().byId("fs").setIcon("sap-icon://full-screen");                                                                                                                                                                                               
				rows = this.getView().byId("table").getVisibleRowCount();                                                                                                                                                                                                  
				rows = rows - 2;                                                                                                                                                                                                                                           
				this.getView().byId("table").setVisibleRowCount(rows);                                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_initP13nData: function () {                                                                                                                                                                                                                                 
			this._initialData = {                                                                                                                                                                                                                                       
				columns: [{                                                                                                                                                                                                                                                
					visible: true,                                                                                                                                                                                                                                            
					name: "HKONT",                                                                                                                                                                                                                                            
					label: "GL Account"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "KUNNR",                                                                                                                                                                                                                                            
					label: "Customer"                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "LIFNR",                                                                                                                                                                                                                                            
					label: "Vendor"                                                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "DMBTR",                                                                                                                                                                                                                                            
					label: "Amount"                                                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "ZTERM",                                                                                                                                                                                                                                            
					label: "Payment Terms"                                                                                                                                                                                                                                    
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "ZSCHL",                                                                                                                                                                                                                                            
					label: "Payment Method"                                                                                                                                                                                                                                   
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "ZFBDT",                                                                                                                                                                                                                                            
					label: "Baseline due date"                                                                                                                                                                                                                                
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "ZUONR",                                                                                                                                                                                                                                            
					label: "Assignment"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "SGTXT",                                                                                                                                                                                                                                            
					label: "Item Text"                                                                                                                                                                                                                                        
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "PRCTR",                                                                                                                                                                                                                                            
					label: "Profit Center"                                                                                                                                                                                                                                    
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "SEGMENT",                                                                                                                                                                                                                                          
					label: "Segment"                                                                                                                                                                                                                                          
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "KOSTL",                                                                                                                                                                                                                                            
					label: "Cost Center"                                                                                                                                                                                                                                      
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "MWSKZ",                                                                                                                                                                                                                                            
					label: "Tax Code"                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "TXJCD",                                                                                                                                                                                                                                            
					label: "Tax Jurisdiction"                                                                                                                                                                                                                                 
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "ZUFNR",                                                                                                                                                                                                                                            
					label: "Order Number"                                                                                                                                                                                                                                     
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "PS_POSID",                                                                                                                                                                                                                                         
					label: "WBS Element"                                                                                                                                                                                                                                      
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "VALUT",                                                                                                                                                                                                                                            
					label: "Value date"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "HBKID",                                                                                                                                                                                                                                            
					label: "House Bank"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "HKTID",                                                                                                                                                                                                                                            
					label: "House Bank Account"                                                                                                                                                                                                                               
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "VUBND",                                                                                                                                                                                                                                            
					label: "Trading Partner"                                                                                                                                                                                                                                  
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "ITM_BUKRS",                                                                                                                                                                                                                                        
					label: "Trading Partner Company Code"                                                                                                                                                                                                                     
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "FIPEX",                                                                                                                                                                                                                                            
					label: "Commentment item"                                                                                                                                                                                                                                 
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "RMVCT",                                                                                                                                                                                                                                            
					label: "Transaction Type"                                                                                                                                                                                                                                 
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "SP_GL_IND",                                                                                                                                                                                                                                        
					label: "Special GL indicator"                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					visible: true,                                                                                                                                                                                                                                            
					name: "DMBE2",                                                                                                                                                                                                                                            
					label: "Amount in second local currency"                                                                                                                                                                                                                  
				}],                                                                                                                                                                                                                                                        
				sort: [{                                                                                                                                                                                                                                                   
					sorted: false,                                                                                                                                                                                                                                            
					name: "HKONT",                                                                                                                                                                                                                                            
					label: "GL Account",                                                                                                                                                                                                                                      
					descending: false                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "KUNNR",                                                                                                                                                                                                                                            
					label: "Customer"                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "LIFNR",                                                                                                                                                                                                                                            
					label: "Vendor"                                                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "DMBTR",                                                                                                                                                                                                                                            
					label: "Amount",                                                                                                                                                                                                                                          
					descending: false                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "ZTERM",                                                                                                                                                                                                                                            
					label: "Payment Terms"                                                                                                                                                                                                                                    
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "ZSCHL",                                                                                                                                                                                                                                            
					label: "Payment Method"                                                                                                                                                                                                                                   
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "ZFBDT",                                                                                                                                                                                                                                            
					label: "Baseline due date"                                                                                                                                                                                                                                
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "ZUONR",                                                                                                                                                                                                                                            
					label: "Assignment"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "SGTXT",                                                                                                                                                                                                                                            
					label: "Item Text"                                                                                                                                                                                                                                        
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "PRCTR",                                                                                                                                                                                                                                            
					label: "Profit Center"                                                                                                                                                                                                                                    
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "SEGMENT",                                                                                                                                                                                                                                          
					label: "Segment"                                                                                                                                                                                                                                          
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "KOSTL",                                                                                                                                                                                                                                            
					label: "Cost Center"                                                                                                                                                                                                                                      
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "MWSKZ",                                                                                                                                                                                                                                            
					label: "Tax Code"                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "TXJCD",                                                                                                                                                                                                                                            
					label: "Tax Jurisdiction"                                                                                                                                                                                                                                 
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "ZUFNR",                                                                                                                                                                                                                                            
					label: "Order Number"                                                                                                                                                                                                                                     
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "PS_POSID",                                                                                                                                                                                                                                         
					label: "WBS Element"                                                                                                                                                                                                                                      
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "VALUT",                                                                                                                                                                                                                                            
					label: "Value date"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "HBKID",                                                                                                                                                                                                                                            
					label: "House Bank"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "HKTID",                                                                                                                                                                                                                                            
					label: "House Bank Account"                                                                                                                                                                                                                               
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "VUBND",                                                                                                                                                                                                                                            
					label: "Trading Partner"                                                                                                                                                                                                                                  
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "ITM_BUKRS",                                                                                                                                                                                                                                        
					label: "Trading Partner Company Code"                                                                                                                                                                                                                     
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "FIPEX",                                                                                                                                                                                                                                            
					label: "Commentment item"                                                                                                                                                                                                                                 
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "RMVCT",                                                                                                                                                                                                                                            
					label: "Transaction Type"                                                                                                                                                                                                                                 
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "SP_GL_IND",                                                                                                                                                                                                                                        
					label: "Special GL indicator"                                                                                                                                                                                                                             
				}, {                                                                                                                                                                                                                                                       
					sorted: false,                                                                                                                                                                                                                                            
					name: "DMBE2",                                                                                                                                                                                                                                            
					label: "Amount in second local currency"                                                                                                                                                                                                                  
				}],                                                                                                                                                                                                                                                        
				group: [{                                                                                                                                                                                                                                                  
					grouped: false,                                                                                                                                                                                                                                           
					name: "HKONT",                                                                                                                                                                                                                                            
					label: "GL Account"                                                                                                                                                                                                                                       
				}, {                                                                                                                                                                                                                                                       
					grouped: false,                                                                                                                                                                                                                                           
					name: "DMBTR",                                                                                                                                                                                                                                            
					label: "Amount"                                                                                                                                                                                                                                           
				}]                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			};                                                                                                                                                                                                                                                          
			//var filter = [{key: "BSCHL", columnKey: "Posting Key", operation:"EQ", exclude:false, value1:"100", value2:""}];                                                                                                                                          
			var filter = [];                                                                                                                                                                                                                                            
			var filterKey = [{                                                                                                                                                                                                                                          
				key: "HKONT",                                                                                                                                                                                                                                              
				columnKey: "GL Account"                                                                                                                                                                                                                                    
			}, {                                                                                                                                                                                                                                                        
				key: "KUNNR",                                                                                                                                                                                                                                              
				columnKey: "Customer"                                                                                                                                                                                                                                      
			}, {                                                                                                                                                                                                                                                        
				key: "LIFNR",                                                                                                                                                                                                                                              
				columnKey: "Vendor"                                                                                                                                                                                                                                        
			}, {                                                                                                                                                                                                                                                        
				key: "DMBTR",                                                                                                                                                                                                                                              
				columnKey: "Amount",                                                                                                                                                                                                                                       
				type: "decimal"                                                                                                                                                                                                                                            
			}, {                                                                                                                                                                                                                                                        
				key: "DMBE2",                                                                                                                                                                                                                                              
				columnKey: "Amount in second local currency",                                                                                                                                                                                                              
				typr: "decimal"                                                                                                                                                                                                                                            
			}, {                                                                                                                                                                                                                                                        
				key: "ZTERM",                                                                                                                                                                                                                                              
				columnKey: "Payment Terms"                                                                                                                                                                                                                                 
			}, {                                                                                                                                                                                                                                                        
				key: "ZSCHL",                                                                                                                                                                                                                                              
				columnKey: "Payment Method"                                                                                                                                                                                                                                
			}, {                                                                                                                                                                                                                                                        
				key: "ZFBDT",                                                                                                                                                                                                                                              
				columnKey: "Baseline due date",                                                                                                                                                                                                                            
				type: "date"                                                                                                                                                                                                                                               
			}, {                                                                                                                                                                                                                                                        
				key: "ZUONR",                                                                                                                                                                                                                                              
				columnKey: "Assignment"                                                                                                                                                                                                                                    
			}, {                                                                                                                                                                                                                                                        
				key: "SGTXT",                                                                                                                                                                                                                                              
				columnKey: "Item Text",                                                                                                                                                                                                                                    
				type: "string"                                                                                                                                                                                                                                             
			}, {                                                                                                                                                                                                                                                        
				key: "PRCTR",                                                                                                                                                                                                                                              
				columnKey: "Profit Center"                                                                                                                                                                                                                                 
			}, {                                                                                                                                                                                                                                                        
				key: "SEGMENT",                                                                                                                                                                                                                                            
				columnKey: "Segment"                                                                                                                                                                                                                                       
			}, {                                                                                                                                                                                                                                                        
				key: "KOSTL",                                                                                                                                                                                                                                              
				columnKey: "Cost Center"                                                                                                                                                                                                                                   
			}, {                                                                                                                                                                                                                                                        
				key: "MWSKZ",                                                                                                                                                                                                                                              
				columnKey: "Tax Code"                                                                                                                                                                                                                                      
			}, {                                                                                                                                                                                                                                                        
				key: "TXJCD",                                                                                                                                                                                                                                              
				columnKey: "Tax Jurisdiction"                                                                                                                                                                                                                              
			}, {                                                                                                                                                                                                                                                        
				key: "ZUFNR",                                                                                                                                                                                                                                              
				columnKey: "Order Number"                                                                                                                                                                                                                                  
			}, {                                                                                                                                                                                                                                                        
				key: "PS_POSID",                                                                                                                                                                                                                                           
				columnKey: "WBS Element"                                                                                                                                                                                                                                   
			}, {                                                                                                                                                                                                                                                        
				key: "VALUT",                                                                                                                                                                                                                                              
				columnKey: "Value date",                                                                                                                                                                                                                                   
				type: "date"                                                                                                                                                                                                                                               
			}, {                                                                                                                                                                                                                                                        
				key: "HBKID",                                                                                                                                                                                                                                              
				columnKey: "House Bank"                                                                                                                                                                                                                                    
			}, {                                                                                                                                                                                                                                                        
				key: "HKTID",                                                                                                                                                                                                                                              
				columnKey: "House Bank Account"                                                                                                                                                                                                                            
			}, {                                                                                                                                                                                                                                                        
				key: "VUBND",                                                                                                                                                                                                                                              
				columnKey: "Trading Partner"                                                                                                                                                                                                                               
			}, {                                                                                                                                                                                                                                                        
				kay: "ITM_BUKRS",                                                                                                                                                                                                                                          
				columnKey: "Trading Partner Company Code"                                                                                                                                                                                                                  
			}, {                                                                                                                                                                                                                                                        
				key: "FIPEX",                                                                                                                                                                                                                                              
				columnKey: "Commentment item"                                                                                                                                                                                                                              
			}, {                                                                                                                                                                                                                                                        
				key: "RMVCT",                                                                                                                                                                                                                                              
				columnKey: "Transaction Type"                                                                                                                                                                                                                              
			}, {                                                                                                                                                                                                                                                        
				key: "SP_GL_IND",                                                                                                                                                                                                                                          
				columnKey: "Special GL indicator"                                                                                                                                                                                                                          
			}];                                                                                                                                                                                                                                                         
			this.filterModel = new JSONModel();                                                                                                                                                                                                                         
			this.filterModel.setData({                                                                                                                                                                                                                                  
				items: filter,                                                                                                                                                                                                                                             
				keys: filterKey                                                                                                                                                                                                                                            
			});                                                                                                                                                                                                                                                         
			this.getView().setModel(this.filterModel, "filterModel");                                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_handleUrlSuccess: function (response) {                                                                                                                                                                                                                     
			debugger;                                                                                                                                                                                                                                                   
			window.open(response.Linkref1);                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
		_handleUrlError: function (e) {                                                                                                                                                                                                                              
			debugger;                                                                                                                                                                                                                                                   
			sap.m.MessageToast.show("Error while redirecting document");                                                                                                                                                                                                
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_navToTransaction: function (transaction) {                                                                                                                                                                                                                  
			var oModel = this.getOwnerComponent().getModel();                                                                                                                                                                                                           
			if (!documentNo)                                                                                                                                                                                                                                            
				documentNo = '';                                                                                                                                                                                                                                           
			if (!compCode)                                                                                                                                                                                                                                              
				compCode = '';                                                                                                                                                                                                                                             
			if (!fYear)                                                                                                                                                                                                                                                 
				fYear = '';                                                                                                                                                                                                                                                
			var mParameters = {                                                                                                                                                                                                                                         
				success: this._handleUrlSuccess,                                                                                                                                                                                                                           
				error: this._handleUrlError                                                                                                                                                                                                                                
			};                                                                                                                                                                                                                                                          
			debugger;                                                                                                                                                                                                                                                   
			var tcodeUrl = "/JETCODESet(TCODE='" + transaction + "',BELNR='" + documentNo + "',BUKRS='" + compCode + "',GJAHR='" + fYear +                                                                                                                              
				"')";                                                                                                                                                                                                                                                      
			oModel.read(tcodeUrl, mParameters);                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		handleFullScreen: function () {                                                                                                                                                                                                                              
			debugger;                                                                                                                                                                                                                                                   
			/*		$(document).keydown($.proxy(function (evt) {                                                                                                                                                                                                            
						debugger;                                                                                                                                                                                                                                                
						sap.m.MessageToast.show("FS");                                                                                                                                                                                                                           
						switch (evt.keyCode) {                                                                                                                                                                                                                                   
						case 122:                                                                                                                                                                                                                                                
							debugger;                                                                                                                                                                                                                                               
							var rows = this.getView().byId("table").getVisibleRowCount();                                                                                                                                                                                           
							if (f11Press == false){                                                                                                                                                                                                                                 
							rows = rows + 2;                                                                                                                                                                                                                                        
							f11Press = true;                                                                                                                                                                                                                                        
							}else{                                                                                                                                                                                                                                                  
							rows = rows - 2;                                                                                                                                                                                                                                        
							f11Press = false;                                                                                                                                                                                                                                       
							}                                                                                                                                                                                                                                                       
							this.getView().byId("table").setVisibleRowCount(rows);                                                                                                                                                                                                  
						}                                                                                                                                                                                                                                                        
					}, this)); */                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			$(document).on("fullscreenchange", function () {                                                                                                                                                                                                            
				if ($(document).fullScreen()) {                                                                                                                                                                                                                            
					//Just went into fullscreen                                                                                                                                                                                                                               
					sap.m.MessageToast.show("FS");                                                                                                                                                                                                                            
				} else {                                                                                                                                                                                                                                                   
					//Just exit fullscreen                                                                                                                                                                                                                                    
					sap.m.MessageToast.show("Ex FS");                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}, this);                                                                                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onNextLines: function (action) {                                                                                                                                                                                                                             
			var lModel = this.localModel.getData();                                                                                                                                                                                                                     
			var numOfItems = lModel["items"].length;                                                                                                                                                                                                                    
			var firstLineEnd = numOfItems - 6;                                                                                                                                                                                                                          
			switch (action) {                                                                                                                                                                                                                                           
			case "BEGIN":                                                                                                                                                                                                                                               
				this.getView().byId("table").setFirstVisibleRow(0);                                                                                                                                                                                                        
				this.getView().byId("subCount").setText("0 - 6");                                                                                                                                                                                                          
				break;                                                                                                                                                                                                                                                     
			case "NEXT":                                                                                                                                                                                                                                                
				var firstRow = this.getView().byId("table").getFirstVisibleRow();                                                                                                                                                                                          
				if (firstRow != firstLineEnd) {                                                                                                                                                                                                                            
					firstRow += 7;                                                                                                                                                                                                                                            
					var lastRow = firstRow + 6;                                                                                                                                                                                                                               
					if (lastRow > numOfItems) {                                                                                                                                                                                                                               
						lastRow = numOfItems;                                                                                                                                                                                                                                    
						firstRow = lastRow - 6;                                                                                                                                                                                                                                  
					}                                                                                                                                                                                                                                                         
					this.getView().byId("table").setFirstVisibleRow(firstRow);                                                                                                                                                                                                
					this.getView().byId("subCount").setText(firstRow + " - " + lastRow);                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
				break;                                                                                                                                                                                                                                                     
			case "PREV":                                                                                                                                                                                                                                                
				firstRow = this.getView().byId("table").getFirstVisibleRow();                                                                                                                                                                                              
				if (firstRow > 0) {                                                                                                                                                                                                                                        
					firstRow -= 7;                                                                                                                                                                                                                                            
					if (firstRow < 0) {                                                                                                                                                                                                                                       
						firstRow = 0;                                                                                                                                                                                                                                            
					}                                                                                                                                                                                                                                                         
					lastRow = firstRow + 6;                                                                                                                                                                                                                                   
					this.getView().byId("table").setFirstVisibleRow(firstRow);                                                                                                                                                                                                
					this.getView().byId("subCount").setText(firstRow + " - " + lastRow);                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
				break;                                                                                                                                                                                                                                                     
			case "END":                                                                                                                                                                                                                                                 
				firstRow = numOfItems - 6;                                                                                                                                                                                                                                 
				lastRow = firstRow + 6;                                                                                                                                                                                                                                    
				this.getView().byId("table").setFirstVisibleRow(firstRow);                                                                                                                                                                                                 
				this.getView().byId("subCount").setText(firstRow + " - " + lastRow);                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            