sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/Button","sap/m/Dialog"],function(e,t,a,r,i,s,o){"use strict";return e.extend("zqtc.ZQTC_CLAIMS.controller.Work+
list",{formatter:a,onInit:function(){var e,t,a=this.byId("table");var r=new sap.ui.model.Filter("SoldTo",sap.ui.model.FilterOperator.GE,sap.ui.getCore().bp);var i=new sap.ui.model.Filter({filters:[r],and:true});var s="/sap/opu/odata/sap/ZQTC_REL_ORDER_SE+
RVICE_SRV/";var o=new sap.ui.model.odata.v2.ODataModel(s,{json:true,loadMetadataAsync:true});o.read("/ZREL_ORDERSet",{filters:[i],success:function(e,t){var a=new sap.ui.model.json.JSONModel;a.setData(e);sap.ui.getCore().setModel(a);this.getView().setMode+
l(a,"tp");sap.m.MessageToast.show("Data Read Successfully")}.bind(this),error:function(e){sap.m.MessageToast.show("Data Read error + oError.responseText")}})},onUpdateFinished:function(e){},onPress:function(e){this._showObject(e.getSource())},onNavBack:f+
unction(){history.go(-1)},onSearch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{var t=[];var a=e.getParameter("query");if(a&&a.length>0){t=[new r("ContractNum",i.Contains,a)]}this._applySearch(t)}},onRefresh:function(){var+
 e=this.byId("table");e.getBinding("items").refresh()},_showObject:function(e){},_applySearch:function(e){},bpSelected:function(e){var t=this.getView().byId("Ibp").getSelectedItem();sap.ui.getCore().bp=t?t.getKey():null;var a=this.getView().byId("table")+
;var r=new sap.ui.model.Filter("SoldTo",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().bp);var i=a.getBinding("items");i.filter([r])},orderSelected:function(e){var t=this.getView().byId("Iorder").getSelectedItem();sap.ui.getCore().order=t?t.getKey():nul+
l;var a=this.getView().byId("table");if(sap.ui.getCore().order){var r=new sap.ui.model.Filter("SoldTo",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().bp);var i=new sap.ui.model.Filter("RelOrder",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().order);var+
 s=a.getBinding("items");s.filter([r,i])}else{this.bpSelected()}},mediaSelected:function(e){var t=this.getView().byId("Missue").getSelectedItem().getKey();sap.ui.getCore().media=t?t.getKey():null;var a=this.getView().byId("table");if(sap.ui.getCore().med+
ia){var r=new sap.ui.model.Filter("SoldTo",sap.ui.model.FilterOperator.GE,sap.ui.getCore().bp);var i=new sap.ui.model.Filter("RelOrder",sap.ui.model.FilterOperator.LE,sap.ui.getCore().order);var s=new sap.ui.model.Filter("Ismidentcode",sap.ui.model.Filte+
rOperator.EQ,sap.ui.getCore().media);var o=a.getBinding("items");o.filter([r,i,s])}else{this.orderSelected()}},onMainSearch:function(e){var t=e.getParameter("query");t.toUpperCase();var a=new sap.ui.model.Filter("Auart",sap.ui.model.FilterOperator.Starts+
With,t);var r=new sap.ui.model.Filter("RelOrder",sap.ui.model.FilterOperator.StartsWith,t);var i=new sap.ui.model.Filter("RelItem",sap.ui.model.FilterOperator.StartsWith,t);var s=new sap.ui.model.Filter("SoldToName",sap.ui.model.FilterOperator.Contains,t+
);var o=new sap.ui.model.Filter("SoldTo",sap.ui.model.FilterOperator.StartsWith,t);var l=new sap.ui.model.Filter("RelItem",sap.ui.model.FilterOperator.StartsWith,t);var n=new sap.ui.model.Filter("ShipToName",sap.ui.model.FilterOperator.StartsWith,t);var +
d=new sap.ui.model.Filter("ShipTo",sap.ui.model.FilterOperator.StartsWith,t);var p=new sap.ui.model.Filter("PurOrderDes",sap.ui.model.FilterOperator.StartsWith,t);var u=new sap.ui.model.Filter("PurOrder",sap.ui.model.FilterOperator.StartsWith,t);var g=th+
is.getView().byId("table");var m=g.getBinding("items");var h=new sap.ui.model.Filter({filters:[a,r,i,s,o,l,n,d,p,u],and:false});var c=[h];m.filter(c)},draggableDialog:null,processEH:function(e){if(!this.draggableDialog){this.draggableDialog=new o({title:+
"Enter Order Reason",contentWidth:"200px",contentHeight:"30px",draggable:true,content:[new sap.m.Label({text:"Order Reason",textDirection:"RTL",design:"Bold"}),new sap.m.Input({width:"100px",fieldWidth:"10px",id:"IReasn",showValueHelp:true,valueHelpReque+
st:[this.onF4,this]})],beginButton:new s({type:"Emphasized",text:"OK",press:function(){var e=sap.ui.getCore().byId("IReasn").getValue();this.createClaim();this.draggableDialog.close()}.bind(this)}),endButton:new s({text:"Close",press:function(){this.drag+
gableDialog.close()}.bind(this)})});this.getView().addDependent(this.draggableDialog)}this.draggableDialog.open()},inputId:"",fragmento:null,onF4:function(e){this.inputId=e.getSource().getId();if(this.fragmento===null){this.fragmento=new sap.ui.xmlfragme+
nt("zqtc.ZQTC_CLAIMS.view.fragmentExcl",this);this.fragmento.bindAggregation("items",{path:"/ODR_REASONSet",template:new sap.m.DisplayListItem({label:"{Augru}",value:"{Bezei}"})});this.getView().addDependent(this.fragmento)}this.fragmento.open()},handleT+
ableValueHelpConfirm:function(e){var t=e.getParameter("selectedItem");var a=t.getLabel();sap.ui.getCore().byId(this.inputId).setValue(a)},createClaim:function(){var e=this.getView().byId("table");var t=e.getModel("tp");var a=t.getData();var r=e.getSelect+
edIndices();var i=[];var s;var o;var l;var n=sap.ui.getCore().byId(this.inputId).getValue();for(var d=0;d<r.length;d++){var p=a.results[r[d]];s=p.RelOrder;o=p.RelItem;l=p.Auart;i.push({Vbeln:s,Posnr:o,Augru:n})}var u={};u.Vbeln=s;u.NP_VBELN=i;var g=new s+
ap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/ZQTC_REL_ORDER_SERVICE_SRV/");g.create("/CLAIMHEADSet",u,{success:function(e,t){sap.m.MessageBox.success("Created Successfully"+e.Vbeln)},error:function(e,t){sap.m.MessageBox.error("Error in creation")}+
})}})});                                                                                                                                                                                                                                                       