sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/viz/ui5/format/ChartFormatter","sap/ui/core/format/NumberFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/contr+
ols/Popover"],function(e,t,a,i,s,n,r,l,o){"use strict";return e.extend("cob.v2.ZQTC_CREDIT_BLOCKED_ORDERS_SRV.controller.Worklist",{formatter:a,onInit:function(){var e;this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getTex+
t("worklistTableTitle"),shareOnJamTitle:this.getResourceBundle().getText("worklistTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorkli+
stMessage",[location.href]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText"),tableBusyDelay:0});this.setModel(e,"worklistView");l.numericFormatter(n.getInstance());var a=n.DefaultPattern;var s=this.getView().byId("idVizFrame");s.setViz+
Properties({plotArea:{dataLabel:{formatString:n.DefaultPattern.STANDARDINTEGER,visible:true,showTotal:true},dataPointStyle:{rules:[{dataContext:{"0-30K":{min:0,max:1e5}},properties:{color:"sapUiChartPaletteSequentialHue1Light1"},displayName:"0-30K"},{dat+
aContext:{"31K-60K":{min:0,max:1e5}},properties:{color:"sapUiChartPaletteSemanticCriticalLight2"},displayName:"31K-60K"},{dataContext:{"61K-90K":{min:0,max:1e5}},properties:{color:"sapUiChartPaletteSequentialHue2Light1"},displayName:"61K-90K"},{dataConte+
xt:{">90K":{min:0,max:1e5}},properties:{color:"sapUiChartPaletteSemanticBadLight2"},displayName:">90K"}]}},valueAxis:{label:{formatString:a.STANDARDINTEGER},title:{visible:false}},categoryAxis:{title:{visible:false},label:{style:{fontSize:"0.8rem",fontWe+
ight:"bold",color:"black"}}},legend:{title:{text:"Amount",visible:true,style:{color:"black"}}},title:{visible:false,text:"Bar"}});var r=[new i("Vkorg","EQ","1001"),new i("Waerk","EQ","USD"),new i("Agegrp","EQ","0-30 days")];this.serviceCall(r);var o=this+
.getView().byId("idPopOver");o.setActionItems([{type:"action",text:"Show Table",press:this.onPopoverPress.bind(this)}]);o.connect(s.getVizUid())},onUpdateFinished:function(e){var t,a=e.getSource(),i=e.getParameter("total");if(i&&a.getBinding("items").isL+
engthFinal()){t=this.getResourceBundle().getText("worklistTableTitleCount",[i])}else{t=this.getResourceBundle().getText("worklistTableTitle")}this.getModel("worklistView").setProperty("/worklistTableTitle",t)},onSelectData:function(e){var t=e.getParamete+
r("data")[0].data.measureNames;var a=this.getView().byId("idVizDataSet").getBinding("data").getContexts();var i=e.getParameter("data")[0].data._context_row_number;var s=a[i].getObject();this.DisplayRevenue(t,s);this.Auart=s.Auart;this.Vkorg=s.Vkorg;this.+
Waerk=s.Waerk;this.Agegrp=s.Agegrp},DisplayRevenue:function(e,t){var a=this.getView().byId("idVizFrame");var i={customDataControl:function(a){var i=new Intl.NumberFormat("en-US",{style:"currency",currency:t.Waerk});switch(e){case"0-30K":var s=new sap.m.H+
Box({items:[new sap.m.Label({text:a.data.val[0].name+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:a.data.val[0].value})]});var n=new sap.m.HBox({items:[new sap.m.Label({text:"Revenue"+":",design:"Bold"}).addStyleClass("sap+
UiTinyMarginEnd"),new sap.m.Text({text:i.format(t.Amount1)})]});var r=new sap.m.HBox({items:[new sap.m.Label({text:"Count"+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:t.Count1})]});return new sap.m.VBox({items:[s,n,r]}).a+
ddStyleClass("sapUiTinyMargin");case"31K-60K":var l=new sap.m.HBox({items:[new sap.m.Label({text:a.data.val[0].name+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:a.data.val[0].value})]});var o=new sap.m.HBox({items:[new sap+
.m.Label({text:"Revenue"+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:i.format(t.Amount2)})]});var d=new sap.m.HBox({items:[new sap.m.Label({text:"Count"+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Te+
xt({text:t.Count2})]});return new sap.m.VBox({items:[l,o,d]}).addStyleClass("sapUiTinyMargin");case"61K-90K":var m=new sap.m.HBox({items:[new sap.m.Label({text:a.data.val[0].name+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({tex+
t:a.data.val[0].value})]});var p=new sap.m.HBox({items:[new sap.m.Label({text:"Revenue"+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:i.format(t.Amount3)})]});var u=new sap.m.HBox({items:[new sap.m.Label({text:"Count"+":",d+
esign:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:t.Count3})]});return new sap.m.VBox({items:[m,p,u]}).addStyleClass("sapUiTinyMargin");default:var g=new sap.m.HBox({items:[new sap.m.Label({text:a.data.val[0].name+":",design:"Bold"}+
).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:a.data.val[0].value})]});var c=new sap.m.HBox({items:[new sap.m.Label({text:"Revenue"+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:i.format(t.Amount4)})]});var h=n+
ew sap.m.HBox({items:[new sap.m.Label({text:"Count"+":",design:"Bold"}).addStyleClass("sapUiTinyMarginEnd"),new sap.m.Text({text:t.Count4})]});return new sap.m.VBox({items:[g,c,h]}).addStyleClass("sapUiTinyMargin")}}};this.oPopOver=new o(i);this.oPopOver+
.setActionItems([{type:"action",text:"Show Table",press:this.onPopoverPress.bind(this)}]);this.oPopOver.connect(a.getVizUid())},onPopoverPress:function(e){this._showObject(e.getSource())},serviceCall:function(e){var t=this.getView().byId("idVizDataSet");+
t.unbindData();t.bindData({path:"/CreditBlockedSOSet",template:t,templateShareable:true,filters:e,events:{dataReceived:function(e){}}})},onFilterSearch:function(e){var t=this;var a=e.getParameter("selectionSet");if(!a[3].getSelectedKeys().length){a=a.sli+
ce(0,3)}var s=a.map(function(e){var a=e.getName();var s;try{s=e.getSelectedKey();return new i(a,"EQ",s)}catch(r){s=e.getSelectedKeys();if(s.length){var n=t.fnmultiFilters(s,a);return n}else{return new i(a,"EQ","")}}});t.serviceCall([].concat.apply([],s))+
},fnmultiFilters:function(e,t){var a=e.map(function(e){return new i(t,"EQ",e)});return a},onPress:function(e){this._showObject()},onNavBack:function(){history.go(-1)},onSearch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{v+
ar t=[];var a=e.getParameter("query");if(a&&a.length>0){t=[new i("Age",s.Contains,a)]}this._applySearch(t)}},onRefresh:function(){var e=this.byId("table");e.getBinding("items").refresh()},_showObject:function(){this.getRouter().navTo("object",{Vkorg:this+
.Vkorg,Waerk:this.Waerk,Agegrp:this.Agegrp,Auart:this.Auart});var e=this.getView().byId("idVizFrame");e.vizSelection([],{clearSelection:true})},_applySearch:function(e){var t=this.byId("table"),a=this.getModel("worklistView");t.getBinding("items").filter+
(e,"Application");if(e.length!==0){a.setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}}})});                                                                                                                   